(this.webpackJsonplevels=this.webpackJsonplevels||[]).push([[0],{25:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);function o(e){var t=e,n={up:!1,left:!1,right:!1,s:!1,m:!1,w:!1},o=function(e,o){switch(e){case 38:n.up=o;break;case 37:n.left=o;break;case 39:n.right=o;break;case 83:n.s=o;break;case 77:n.m=o;break;case 87:n.w=o}t.emit("keyEvent")(n)};document.addEventListener("keydown",function(e){o(e.keyCode,!0)}.bind(this)),document.addEventListener("keyup",function(e){o(e.keyCode,!1)}.bind(this));var r=document.querySelector(".butt-left");r.addEventListener("mousedown",(function(){o(37,!0)})),r.addEventListener("mouseup",(function(){o(37,!1)})),r.addEventListener("touchstart",(function(){o(37,!0)})),r.addEventListener("touchend",(function(){o(37,!1)}));var a=document.querySelector(".butt-right");a.addEventListener("mousedown",(function(){o(39,!0)})),a.addEventListener("mouseup",(function(){o(39,!1)})),a.addEventListener("touchstart",(function(){o(39,!0)})),a.addEventListener("touchend",(function(){o(39,!1)}));var i=document.querySelector(".butt-front");i.addEventListener("mousedown",(function(){o(38,!0)})),i.addEventListener("mouseup",(function(){o(38,!1)})),i.addEventListener("touchstart",(function(){o(38,!0)})),i.addEventListener("touchend",(function(){o(38,!1)}))}var r=null,a=function(e){return function(t){return e[t]=e[t]||[]}},i=r=r||function(){var e={};return{emit:function(t){return function(n){return a(e)(t).forEach((function(e){return e(n)}))}},subscribe:function(t){return function(n){return a(e)(t).push(n),function(){return e[t]=e[t].filter((function(e){return e!==n}))}}},showAll:function(){var t={};for(var n in e)t[n]=e[n].length;console.log(t)}}}(),s=n(39),c=n.p+"static/media/px.2be78f43.jpg",l=n.p+"static/media/nx.b2401269.jpg",u=n.p+"static/media/py.659ebc34.jpg",d=n.p+"static/media/ny.462f1251.jpg",m=n.p+"static/media/pz.8ea5ba14.jpg",f=n.p+"static/media/nz.7f255b96.jpg",p=n.p+"static/media/posx.be2d83a2.jpg",h=n.p+"static/media/negx.d016c8e7.jpg",g=n.p+"static/media/posy.01cfd221.jpg",v=n.p+"static/media/negy.f01f8356.jpg",y=n.p+"static/media/posz.ef37b8e1.jpg",b=n.p+"static/media/negz.f346a80a.jpg",_=n.p+"static/media/map-walls-bump.40f05869.png",w=n.p+"static/media/level-rooms.6513b781.obj",N=n.p+"static/media/floor_outer_map.35e50f6e.jpg",S=n.p+"static/media/botMap.972e276e.png",k=[{type:"obj",filename:w,key:"level-rooms"},{type:"glb",filename:n.p+"static/media/botAnim.5bfca6de.glb",key:"bot"},{type:"cubeTextures",filename:{px:c,nx:l,py:u,ny:d,pz:m,nz:f},key:"skyBox"},{type:"cubeTextures",filename:{px:p,nx:h,py:g,ny:v,pz:y,nz:b},key:"ironEnv"},{type:"img",filename:S,key:"botMap"},{type:"img",filename:_,key:"bumpWalls"},{type:"img",filename:N,key:"mapFloorOuter",wrap:!0}],j={wall:{mat:"MeshPhongMaterial",props:{color:16777215,emissive:13192,specular:16777215,shininess:60,bumpMap:"bumpWalls",bumpScale:.1,envMap:"skyBox",reflectivity:.5,map:"bumpWalls"}},iron:{mat:"MeshPhongMaterial",props:{color:16777215,emissive:13192,specular:16777215,shininess:60,bumpMap:"botMap",bumpScale:.1,envMap:"ironEnv",reflectivity:.5,map:"botMap",skinning:!0}},green:{mat:"MeshPhongMaterial",props:{color:17510,emissive:16777215,map:"mapFloorOuter",bumpMap:"mapFloorOuter",bumpScale:1,envMap:"skyBox",reflectivity:.5}},road:{mat:"MeshPhongMaterial",props:{color:10556063,emissive:10556063,map:"mapFloorOuter",bumpMap:"mapFloorOuter",bumpScale:1,envMap:"skyBox",reflectivity:.5}}},M=175.335,A="FRAME_UPDATE",L={"-2":{outer:{fogNear:-200,fogFar:500,color:1582461},corridorLight:{fogNear:-40,fogFar:150,color:7012460},default:{fogNear:-40,fogFar:150,color:8914344}},"-1":{outer:{fogNear:20,fogFar:500,color:1582461},firstRoomLight:{fogNear:-40,fogFar:150,color:9054},corridorLight:{fogNear:-40,fogFar:150,color:7012460},default:{fogNear:-40,fogFar:150,color:3019147}},0:{default:{fogNear:-40,fogFar:150,color:3950848}},1:{default:{fogNear:-40,fogFar:150,color:933458}},2:{default:{fogNear:0,fogFar:80,color:661347}},3:{default:{fogNear:0,fogFar:80,color:680768}},4:{default:{fogNear:0,fogFar:80,color:11272192}}},O=[{oldState:"outer",newState:"corridor",oldQuadrant:[0,-2,4],newQuadrant:[0,-2,3],emitData:[{emitKey:"changeEnvironment",environmentMode:"corridorLight"},{emitKey:"toggleImgSceneBack",backgroundImg:!1}]},{oldState:"corridor",newState:"outer",oldQuadrant:[0,-2,3],newQuadrant:[0,-2,4],emitData:[{emitKey:"changeEnvironment",environmentMode:"outer"}]},{oldState:"corridor",newState:"firstRoom",oldQuadrant:[0,-1,2],newQuadrant:[0,-1,1],emitData:[{emitKey:"changeEnvironment",environmentMode:"firstRoomLight"}]},{oldState:"firstRoom",newState:"corridor",oldQuadrant:[0,-1,1],newQuadrant:[0,-1,2],emitData:[{emitKey:"changeEnvironment",environmentMode:"corridorLight"}]},{oldState:"firstRoom",newState:"playLevel",oldQuadrant:[0,-1,0],newQuadrant:[0,-1,"ANY_MINUS_ONE"],emitData:[{emitKey:"destroyStartCorridor"},{emitKey:"changeLevel"}]},{oldState:"firstRoom",newState:"playLevel",oldQuadrant:[0,-1,0],newQuadrant:["ANY_MINUS_ONE",-1,0],emitData:[{emitKey:"destroyStartCorridor"},{emitKey:"changeLevel"}]},{oldState:"firstRoom",newState:"playLevel",oldQuadrant:[0,-1,0],newQuadrant:["ANY_PLUS_ONE",-1,0],emitData:[{emitKey:"destroyStartCorridor"},{emitKey:"changeLevel"}]},{oldState:"playLevel",newState:"playLevel",oldQuadrant:["ANY","ANY","ANY"],newQuadrant:["ANY","ANY_PLUS_ONE","ANY"],emitData:[{emitKey:"changeEnvironment",environmentMode:"default"},{emitKey:"changeLevel",counter:function(){return 0}}]},{oldState:"playLevel",newState:"playLevel",oldQuadrant:["ANY","ANY","ANY"],newQuadrant:["ANY","ANY_MINUS_ONE","ANY"],emitData:[{emitKey:"changeEnvironment",environmentMode:"default"},{emitKey:"changeLevel"}]},{oldState:"playLevel",newState:"playLevel",oldQuadrant:["ANY","ANY","ANY"],newQuadrant:["ANY","ANY","ANY_MINUS_ONE"],emitData:[{emitKey:"changeLevel",counter:function(e){return++e}}]},{oldState:"playLevel",newState:"playLevel",oldQuadrant:["ANY","ANY","ANY"],newQuadrant:["ANY_MINUS_ONE","ANY","ANY"],emitData:[{emitKey:"changeLevel",counter:function(e){return++e}}]},{oldState:"playLevel",newState:"playLevel",oldQuadrant:["ANY","ANY","ANY"],newQuadrant:["ANY_PLUS_ONE","ANY","ANY"],emitData:[{emitKey:"changeLevel",counter:function(e){return++e}}]},{oldState:"playLevel",newState:"playLevel",oldQuadrant:["ANY","ANY","ANY"],newQuadrant:["ANY","ANY","ANY_PLUS_ONE"],emitData:[{emitKey:"changeLevel",counter:function(e){return++e}}]}],E={canId:"webgl-canvas",rendererCon:{antialias:!0},clearColor:L[-1].outer.color,backgroundColor:L[-1].outer.color,amb:{color:L[-1].outer.color,strength:.8}},D={speed:.8,speedRot:.02,speedDown:-.25,offsetFromFloor:10,offsetFromFloorFactor:.5,offsetWallCollision:3.5,level:-13,startRot:[0,0,0],startPos:[100,-60,1e3],cameraData:{fov:90,ratio:window.innerWidth/window.innerHeight,near:.1,far:1e3,pos:[0,2,-.5]},frontObjPos:[0,0,-1],lightDataOne:{color:12768499,strength:.5,pos:[0,100,0]},lightDataTwo:{color:16711680,strength:.4,pos:[0,-30,40]}};var x,C,Y,R,T=n(6),F=n(7),Q="outer",I=function(e,t){for(var n=0;n<O.length;++n){var o=P(Object(F.a)(e),Object(F.a)(t),Object(T.a)(Object(T.a)({},O[n]),{},{oldQuadrant:Object(F.a)(O[n].oldQuadrant),newQuadrant:Object(F.a)(O[n].newQuadrant)}));if(o)return o}return{levelState:Q}},P=function(e,t,n){var o=n.oldState,r=n.newState,a=n.oldQuadrant,i=n.newQuadrant,s=n.emitData;if(Q===o&&("ANY"===a[0]&&(a[0]=e[0]),"ANY"===a[1]&&(a[1]=e[1]),"ANY"===a[2]&&(a[2]=e[2]),"ANY"===i[0]&&(i[0]=t[0]),"ANY"===i[1]&&(i[1]=t[1]),"ANY"===i[2]&&(i[2]=t[2]),"ANY_PLUS_ONE"===i[0]&&(i[0]=e[0]+1),"ANY_PLUS_ONE"===i[1]&&(i[1]=e[1]+1),"ANY_PLUS_ONE"===i[2]&&(i[2]=e[2]+1),"ANY_MINUS_ONE"===i[0]&&(i[0]=e[0]-1),"ANY_MINUS_ONE"===i[1]&&(i[1]=e[1]-1),"ANY_MINUS_ONE"===i[2]&&(i[2]=e[2]-1),a[0]===e[0]&&a[1]===e[1]&&a[2]===e[2]&&i[0]===t[0]&&i[1]===t[1]&&i[2]===t[2]))return Q=r,s.map((function(e){return Object(T.a)(Object(T.a)({},e),{},{levelState:Q,oldQuadrant:Object(F.a)(a),newQuadrant:Object(F.a)(i)})}))},G=function(){var e=[];return{update:function(t){var n=t.x,o=t.y,r=t.z,a=[Math.floor(n/M),Math.floor(o/70),Math.floor(r/M)];if(a[0]!==e[0]||a[1]!==e[1]||a[2]!==e[2]){var i={isChanged:!0,currentQuadrant:a,oldQuadrant:e};return e=[].concat(a),i}return{isChanged:!1}}}},B=n(0),K=n(19),W=n(20),q=null,z=null,U={},H=0,V=function(e){"obj"===e.type&&x.load(e.filename,(function(t){U[e.key]=t,J()})),"glb"!==e.type&&"gltf"!==e.type||Y.load(e.filename,(function(t){U[e.key]=t,J()})),"img"===e.type&&C.load(e.filename,(function(t){U[e.key]=t,J()})),"cubeTextures"===e.type&&R.load([e.filename.px,e.filename.nx,e.filename.py,e.filename.ny,e.filename.pz,e.filename.nz],(function(t){U[e.key]=t,J()}))},J=function(){++H<z.length?V(z[H]):q(U)};var X=function(e){for(var t in e)e[t].wrapS&&(e[t].wrapS=e[t].wrapT=B.RepeatWrapping);var n=["bumpMap","envMap","map"],o={},r=function(t){o[t]=new B[j[t].mat](Object(T.a)({},j[t].props)),n.map((function(n){return j[t].props[n]&&(o[t][n]=e[j[t].props[n]])}))};for(var a in j)r(a);return o},Z=n(13);var $=[],ee=function(e){return $.push(e)},te=function(e){return $=$.filter((function(t){return t!==e}))},ne=[],oe=function(e){return ne.push(e)},re=function(e){return ne=ne.filter((function(t){return e!==t}))},ae=[];function ie(e){var t,n=e,o=D.startPos,r=D.startRot,a=D.cameraData,i=D.frontObjPos,s=D.lightDataOne,c=D.speed,l=D.offsetFromFloor,u=D.offsetFromFloorFactor,d=D.speedDown,m=D.offsetWallCollision,f=D.speedRot,p={},h=!1,g=!0,v=new B.Object3D;v.position.fromArray(o),v.rotation.fromArray(r);var y=new B.Object3D;y.position.fromArray(i),v.add(y);var b=a.fov,_=a.ratio,w=a.near,N=a.far,S=a.pos;(t=new B.PerspectiveCamera(b,_,w,N)).position.fromArray(S),v.add(t);var k=s.color,j=s.strenth,M=s.pos,L=new B.PointLight(k,j);L.position.fromArray(M),v.add(L);var O=function(e,t,n,o){var r=e,a=t,i=n,s=o,c=new B.Vector3,l=new B.Vector3(0,-1,0),u=!0;return{check:function(e){if(!u){c.copy(r.position);var t=new B.Raycaster(c,l).intersectObjects($);t&&t[0]&&t[0].distance>a+i?r.position.y+=s*e.count:!t||t[0]?r.position.y=t[0].point.y+a:r.position.y+=s*e.count}},start:function(){u=!1}}}(v,l,u,d),E=function(e,t,n){var o=n,r=e,a=t,i=new B.Vector3,s=new B.Vector3;return{check:function(){a.getWorldPosition(s),i.copy(r.position),s.sub(i);var e=new B.Raycaster(i,s).intersectObjects(ne);return e[0]&&e[0].distance<o}}}(v,y,m),x=function(e,t){return function(){ae.forEach((function(n){e.position.distanceTo(n.position)<10&&!n.userData.nearPlayer&&(n.userData.nearPlayer=!0,t.emit("nearMesh")({toNear:!0,mesh:n})),e.position.distanceTo(n.position)>=10&&n.userData.nearPlayer&&(n.userData.nearPlayer=!1,t.emit("nearMesh")({toNear:!1,mesh:n}))}))}}(v,n);return n.subscribe("keyEvent")((function(e){return p=e})),n.subscribe(A)((function(e){if(!h&&!g&&(O.check(e),p)){if(p.up){if(E.check())return;v.translateZ(-c*e.count),x(),n.emit("playerMove")(v.position)}p.left&&(v.rotation.y+=f*e.count),p.right&&(v.rotation.y-=f*e.count)}})),n.subscribe("toggleDialog")((function(e){return h=e.isOpen})),{start:function(){g=!1,O.start()},getObj:function(){return v},getCamera:function(){return t},setToPos:function(e,t,n){return v.position.set(e,t,n)}}}n(25);var se=document.querySelector(".progress"),ce=-100,le=!0;!function e(){le&&setTimeout((function(){0==++ce&&(ce=-100),se.style.marginLeft=ce+"%",e()}),30)}();var ue=[{q:"\u041f\u0440\u0438\u0432\u0435\u0442 !",a:"\u0414\u0435\u043d\u044c \u0434\u043e\u0431\u0440\u044b\u0439, \u043a\u0440\u0435\u043c\u043d\u0438\u0435\u0432\u0430\u044f \u0444\u043e\u0440\u043c\u0430 \u0436\u0438\u0437\u043d\u0438."},{q:"\u0427\u0442\u043e \u044d\u0442\u043e \u0437\u0430 \u043c\u0435\u0441\u0442\u043e.",a:"\u042d\u0442\u043e \u044d\u043d\u0442\u0440\u043e\u043f\u0438\u0439\u043d\u044b\u0439 \u0433\u0438\u043f\u043f\u0435\u0440\u0442\u043e\u043d\u043d\u0435\u043b\u044c."}],de={ru:{"After a long wandering in the desert...":"\u041f\u043e\u0441\u043b\u0435 \u0434\u043e\u043b\u0433\u043e\u0433\u043e \u0431\u043b\u0443\u0436\u0434\u0430\u043d\u0438\u044f \u043f\u043e \u043f\u0443\u0441\u0442\u043e\u0448\u0438...","Stranger, I threw you a terminal with a pass phrase. Remember:":"\u041d\u0435\u0437\u043d\u0430\u043a\u043e\u043c\u0435\u0446, \u044f \u0441\u0431\u0440\u043e\u0441\u0438\u043b \u0442\u0435\u0431\u0435 \u0442\u0435\u0440\u043c\u0438\u043d\u0430\u043b \u0441 \u043f\u0430\u0440\u043e\u043b\u044c\u043d\u043e\u0439 \u0444\u0440\u0430\u0437\u043e\u0439. \u0417\u0430\u043f\u043e\u043c\u043d\u0438:","And blood-black nothingness began to spin...":"\u041a\u0440\u043e\u0432\u0430\u0432\u043e-\u0447\u0435\u0440\u043d\u043e\u0435 \u043d\u0438\u0447\u0442\u043e \u043f\u0443\u0441\u0442\u0438\u043b\u043e\u0441\u044c \u0432\u0438\u0442\u044c \u0441\u0438\u0441\u0442\u0435\u043c\u0443 \u043a\u043b\u0435\u0442\u043e\u043a,","A system of cells interlinked within cells interlinked within cells interlinked within one stem...":"\u0441\u0432\u044f\u0437\u0430\u043d\u043d\u044b\u0445 \u0432\u043d\u0443\u0442\u0440\u0438, \u043a\u043b\u0435\u0442\u043e\u043a, \u0441\u0432\u044f\u0437\u0430\u043d\u043d\u044b\u0445 \u0432\u043d\u0443\u0442\u0440\u0438, \u043a\u043b\u0435\u0442\u043e\u043a \u0432 \u0435\u0434\u0438\u043d\u043e\u043c \u0441\u0442\u0435\u0431\u043b\u0435 \u0438 \u044f\u0432\u0441\u0442\u0432\u0435\u043d\u043d\u043e,","And dreadfully distinct against the dark, a tall white fountain played.":"\u0434\u043e \u0436\u0443\u0442\u0438 \u043d\u0430 \u0444\u043e\u043d\u0435 \u0442\u044c\u043c\u044b \u0432\u0432\u044b\u0441\u044c \u0431\u0435\u043b\u044b\u043c \u0431\u0438\u043b \u0444\u043e\u043d\u0442\u0430\u043d.","Officer K-D-six-dash-three-dot-seven, let's begin. Ready?":"\u041e\u0444\u0438\u0446\u0435\u0440 \u041a\u0435\u0439 \u0414\u0438 6.3.7. \u043f\u0440\u0438\u0441\u0442\u0443\u043f\u0438\u043c. \u0413\u043e\u0442\u043e\u0432\u044b?","Yes, sir.":"\u0413\u043e\u0442\u043e\u0432","No.":"\u041d\u0435 \u0433\u043e\u0442\u043e\u0432","Recite your baseline.":"\u0412\u0430\u0448\u0430 \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u044c\u043d\u0430\u044f \u0444\u0440\u0430\u0437\u0430.","I do not remember.":"\u042f \u0437\u0430\u0431\u044b\u043b.","I'll come back later.":"\u042f \u0437\u0430\u0439\u0434\u0443 \u043f\u043e\u043f\u043e\u0437\u0436\u0435.","Cells.":"\u041a\u043b\u0435\u0442\u043a\u0438.","Have you ever been in an institution? Cells.":"\u0414\u043e\u0432\u043e\u0434\u0438\u043b\u043e\u0441\u044c \u043b\u0438 \u0432\u0430\u043c \u0431\u044b\u0432\u0430\u0442\u044c \u0432 \u0442\u044e\u0440\u044c\u043c\u0435? \u041a\u043b\u0435\u0442\u043a\u0438.","Do they keep you in a cell? Cells.":"\u0412\u0430\u0441 \u0434\u0435\u0440\u0436\u0430\u0442 \u0432 \u043a\u043b\u0435\u0442\u043a\u0435? \u041a\u043b\u0435\u0442\u043a\u0438.","When you're not performing your duties do they keep you in a little box? Cells.":"\u041a\u043e\u0433\u0434\u0430 \u0432\u044b \u043d\u0435 \u0438\u0441\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0435 \u043e\u0431\u044f\u0437\u0430\u043d\u043d\u043e\u0441\u0442\u0438, \u0432\u0430\u0441 \u0434\u0435\u0440\u0436\u0430\u0442 \u0432 \u043a\u043e\u0440\u043e\u0431\u043a\u0435? \u041a\u043b\u0435\u0442\u043a\u0438.","Interlinked.":"\u0421\u0432\u044f\u0437\u0430\u043d\u044b.","What's it like to hold the hand of someone you love? Interlinked.":"\u0427\u0442\u043e \u0432\u044b \u0447\u0443\u0432\u0441\u0442\u0432\u0443\u0435\u0442\u0435 \u0434\u0435\u0440\u0436\u0430 \u0437\u0430 \u0440\u0443\u043a\u0443 \u0442\u043e\u0433\u043e \u043a\u043e\u0433\u043e \u043b\u044e\u0431\u0438\u0442\u0435? \u0421\u0432\u044f\u0437\u0430\u043d\u044b.","Did they teach you how to feel finger to finger? Interlinked.":"\u0412\u0430\u0441 \u0443\u0447\u0438\u043b\u0438 \u043f\u0440\u0438\u0441\u0442\u0430\u0432\u043b\u044f\u0442\u044c \u043f\u0430\u043b\u0435\u0446 \u043a \u043f\u0430\u043b\u044c\u0446\u0443? \u0421\u0432\u044f\u0437\u0430\u043d\u044b.","Do you long for having your heart interlinked? Interlinked.":"\u0412\u044b \u0436\u0430\u0436\u0434\u0435\u0442\u0435 \u0441\u0432\u044f\u0437\u0430\u0442\u044c \u0441 \u043a\u0435\u043c-\u043d\u0438\u0431\u0443\u0434\u044c \u0441\u0435\u0440\u0434\u0446\u0435? \u0421\u0432\u044f\u0437\u0430\u043d\u044b.","Do you dream about being interlinked? Interlinked.":"\u0412\u0430\u043c \u0441\u043d\u0438\u0442\u0441\u044f \u0441\u0432\u044f\u0437\u044c \u0441 \u043a\u0435\u043c-\u043b\u0438\u0431\u043e? \u0421\u0432\u044f\u0437\u0430\u043d\u044b.","What's it like to hold your child in your arms? Interlinked.":"\u0427\u0442\u043e \u0432\u044b \u0447\u0443\u0432\u0441\u0442\u0432\u0443\u0435\u0442\u0435, \u0434\u0435\u0440\u0436\u0430 \u0432 \u0440\u0443\u043a\u0430\u0445 \u0441\u0432\u043e\u0435\u0433\u043e \u0440\u0435\u0431\u0435\u043d\u043a\u0430? \u0421\u0432\u044f\u0437\u0430\u043d\u044b.","Do you feel that there's a part of you that's missing? Interlinked.":"\u0412\u044b \u0447\u0443\u0432\u0441\u0442\u0432\u0443\u0435\u0442\u0435, \u0447\u0442\u043e \u0432\u0430\u043c \u0447\u0435\u0433\u043e-\u0442\u043e \u043d\u0435 \u0445\u0432\u0430\u0442\u0430\u0435\u0442? \u0421\u0432\u044f\u0437\u0430\u043d\u044b.","Within cells interlinked.":"\u041a\u043b\u0435\u0442\u043e\u043a \u0441\u0432\u044f\u0437\u0430\u043d\u043d\u044b\u0445 \u0432\u043d\u0443\u0442\u0440\u0438.","Why don't you say that three times: Within cells interlinked.":'\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u0442\u0440\u0438 \u0440\u0430\u0437\u0430 "\u043a\u043b\u0435\u0442\u043e\u043a \u0441\u0432\u044f\u0437\u0430\u043d\u043d\u044b\u0445 \u0432\u043d\u0443\u0442\u0440\u0438',"We're done... Constant K, you can pick up your bonus.":"\u041d\u0430 \u044d\u0442\u043e\u043c \u0432\u0441\u0435. \u041a\u0435\u0439 \u0441\u0442\u0430\u0431\u0438\u043b\u0435\u043d, \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u0440\u043e\u0439\u0442\u0438 \u0437\u0430 \u0431\u043e\u043d\u0443\u0441\u043e\u043c.","Thank you, sir.":"\u0421\u043f\u0430\u0441\u0438\u0431\u043e, \u0441\u044d\u0440.","...If you read it, you find dropped terminal and got top level of desert. Welcome...":"...\u0415\u0441\u043b\u0438 \u0442\u044b \u0447\u0438\u0442\u0430\u0435\u0448\u044c \u044d\u0442\u043e, \u0442\u044b \u043d\u0430\u0448\u0435\u043b \u0443\u043f\u0430\u0432\u0448\u0438\u0439 \u0442\u0435\u0440\u043c\u0438\u043d\u0430\u043b \u0438 \u0434\u043e\u0431\u0440\u0430\u043b\u0441\u044f \u0434\u043e \u0432\u0435\u0440\u0445\u043d\u0435\u0433\u043e \u0443\u0440\u043e\u0432\u043d\u044f \u043f\u0443\u0441\u0442\u043e\u0448\u0438.","Who are you?":"\u041a\u0442\u043e \u0442\u044b?","It does not matter. Later. May be..":"\u042d\u0442\u043e \u043d\u0435\u0432\u0430\u0436\u043d\u043e. \u041f\u043e\u0437\u0436\u0435. \u041c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c..","Hey...":"\u042d\u0439...",open:"\u043f\u0443\u0441\u043a","Previous part: ":"\u041f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0430\u044f \u0447\u0430\u0441\u0442\u044c: ","Author: ":"\u0410\u0432\u0442\u043e\u0440: ",link:"\u0441\u0441\u044b\u043b\u043a\u0430","/factory":"/ru/factory/"}},me="en";var fe=function(e){return de[me]&&de[me][e]||e},pe=["room_02","room_03","room_04","room_05"],he=["outer_walls","outer_floor","outer_road"];var ge=n(1),ve=n(2),ye={x:55,z:75},be=function(){function e(){Object(ge.a)(this,e),this.inScene=!1,this._state="go",this._targetAngle=null,this.container=new B.Group,this._modelGroup=new B.Group,this._modelGroup.position.x=ye.x,this._modelGroup.position.z=ye.z,this._modelGroup.rotation.y=Math.random()*(2*Math.PI),this.container.add(this._modelGroup),this._objFrom=new B.Object3D,this._modelGroup.add(this._objFrom),this._objTo=new B.Object3D,this._objTo.position.set(0,0,1),this._modelGroup.add(this._objTo);var t=function(e){var t={animations:e.animations,scene:e.scene.clone(!0)},n={};e.scene.traverse((function(e){e.isSkinnedMesh&&(n[e.name]=e)}));var o={},r={};for(var a in t.scene.traverse((function(e){e.isBone&&(o[e.name]=e),e.isSkinnedMesh&&(r[e.name]=e)})),n){for(var i=n[a].skeleton,s=r[a],c=[],l=0;l<i.bones.length;++l){var u=o[i.bones[l].name];c.push(u)}s.bind(new B.Skeleton(c,i.boneInverses),s.matrixWorld)}return t}(e.botScene);this.model=t.scene.children[0],this.model.children[1].material=e.botMaterial,this._animations=e.botScene.animations,this._mixer=new B.AnimationMixer(this.model.children[1]),this._walkAction=this._mixer.clipAction(this._animations[0]),this._walkAction.play(),this._modelGroup.add(this.model)}return Object(ve.a)(e,[{key:"update",value:function(e){this._mixer.update(e.delta),this._componentCollision&&this._updateState()}},{key:"setCollisionMesh",value:function(e){this._collisionMeshes=[e],this.container.add(e),e.material.visible=!1,this._componentCollision=_e(this._objFrom,this._objTo,7,this._collisionMeshes)}},{key:"removeCollisionMesh",value:function(){this._collisionMeshes=null,this._componentCollision=null}},{key:"prepareToSay",value:function(e){this._state="say",this._modelGroup.lookAt(e.x,this.container.position.y,e.z)}},{key:"_updateState",value:function(){"go"===this._state&&(this._componentCollision.check()?this._startRotate():this._modelGroup.translateZ(.1));"rotate"===this._state&&(this._modelGroup.rotation.y+=this._targetAngle-this._modelGroup.rotation.y<0?-.01:.01,this._modelGroup.rotation.y%=2*Math.PI,Math.abs(this._modelGroup.rotation.y-this._targetAngle)<.5&&this._startGo())}},{key:"_startGo",value:function(){this._state="go"}},{key:"_startRotate",value:function(){this._state="rotate",this._targetAngle=(this._modelGroup.rotation.y+1.5+4*Math.random())%(2*Math.PI)}}]),e}();be.botScene=null,be.botMaterial=null;var _e=function(e,t,n,o){var r=new B.Vector3,a=new B.Vector3;return{check:function(){return t.getWorldPosition(a),e.getWorldPosition(r),a.sub(r),!!new B.Raycaster(r,a,0,20).intersectObject(o[0],!0)[0]}}},we=n(8),Ne=function(e){return{toggleDialog:function(t){e({type:"TOGGLE_DIALOG",isDialog:t})},toggleButtonDialog:function(t){e({type:"TOGGLE_BUTTON_DIALOG",isButtonDialog:t})}}},Se=n(5),ke=Object(we.b)((function(e){return{userReplicies:e.app.userReplicies}}))((function(e){return Object(Se.jsx)("div",{className:"userReplicies",children:e.userReplicies.map((function(e){return Object(Se.jsx)("button",{onClick:function(){return console.log("saaa")},children:e.q},Math.floor(1e5*Math.random()))}))})})),je=Object(we.b)((function(e){return{botAnswers:e.app.botAnswers}}))((function(e){return Object(Se.jsx)("div",{className:"botAnswers",children:e.botAnswers.map((function(e){return Object(Se.jsxs)("div",{children:[Object(Se.jsx)("p",{children:e.q}),Object(Se.jsx)("p",{children:e.a})]},Math.floor(1e5*Math.random()))}))})}));var Me={dispatch:null},Ae=Object(we.b)((function(e){return{isButtonDialog:e.app.isButtonDialog,isDialog:e.app.isDialog}}))((function(e){return!Me.dispatch&&(Me.dispatch=e.dispatch),Object(Se.jsxs)("div",{className:"App",children:[Object(Se.jsx)("div",{className:"dialog",children:e.isDialog&&e.isButtonDialog&&Object(Se.jsxs)("div",{className:"dialog-inner",children:[Object(Se.jsx)(je,{}),Object(Se.jsx)(ke,{})]})}),e.isButtonDialog&&Object(Se.jsx)("button",{className:"last-elem",onClick:function(){Ne(e.dispatch).toggleDialog(!e.isDialog)},children:e.isDialog?"close dialog":"open dialog"})]})})),Le=175.335,Oe=(n(3),n(12)),Ee=n.n(Oe),De=n(9),xe=n(22),Ce={botAnswers:[],userReplicies:[],isDialog:!1,isButtonDialog:!1},Ye=Object(De.c)({app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce,t=arguments.length>1?arguments[1]:void 0;if("TOGGLE_DIALOG"===t.type){var n=Object(F.a)(ue),o=Object(F.a)(ue);return Object(T.a)(Object(T.a)({},e),{},{botAnswers:n,userReplicies:o,isDialog:t.isDialog})}return"TOGGLE_BUTTON_DIALOG"===t.type?Object(T.a)(Object(T.a)({},e),{},{isDialog:!1,isButtonDialog:t.isButtonDialog}):e}}),Re=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||De.d,Te=Object(De.e)(Ye,Re(Object(De.a)(xe.a)));Ee.a.render(Object(Se.jsx)(we.a,{store:Te,children:Object(Se.jsx)(Ae,{})}),document.getElementById("root")),function(){var e=document.querySelector(".app-wrapper"),t=document.querySelector("#butt-fullscreen");t.addEventListener("click",(function(){document.fullscreenElement||(e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen())}));var n=function(n){e.style.width=window.innerWidth+"px",e.style.height=window.innerHeight+"px",e.style.fontSize=Math.max(Math.min(Math.min(window.innerWidth,window.innerHeight),400),350)/50+"px",t.style.display=document.fullscreenElement?"none":"flex"};window.addEventListener("resize",n),n()}();var Fe=function(e){!function(e){var t=e.emit(A),n={time:0,delta:0,count:0,oldTime:0},o=s.a((function(){return n}),(function(e){return e.time=Date.now(),e}),(function(e){return e.delta=.001*(e.time-e.oldTime),(isNaN(e.delta)||e.delta>1e3||0==e.delta)&&(e.delta=1e3/60*.001),e}),(function(e){return e.count=e.delta/(1/60),e}),(function(e){return t(e),e}),(function(e){return e.oldTime=e.time,e}),(function(e){return n=e}));!function e(){requestAnimationFrame(e),o(n)}()}(i),i.subscribe(A)((function(){return Z.b()}));var t=function(e,t){var n=E.canId,o=E.rendererCon,r=E.clearColor,a=E.amb,i=document.getElementById(n);o.canvas=i;var s=new B.WebGLRenderer(o);s.setClearColor(r),s.setPixelRatio(window.devicePixelRatio),s.setSize(window.innerWidth,window.innerHeight);var c=new B.Scene;c.background=t.skyBox;var l,u=L[-1].outer,d=u.color,m=u.fogNear,f=u.fogFar;c.fog=new B.Fog(d,m,f);var p=a.color,h=a.strength;l=new B.AmbientLight(p,h),c.add(l);var g=null,v=function(){var e={width:window.innerWidth,height:window.innerHeight};s.setSize(e.width,e.height),g&&(g.aspect=e.width/e.height,g.updateProjectionMatrix())};window.addEventListener("resize",v),v();var y=c.add.bind(c);return e.subscribe(A)((function(){return g&&s.render(c,g)})),e.subscribe("toggleImgSceneBack")((function(e){var n=e.backgroundImg;console.log("backgroundImg",n),c.background=n?t.skyBox:null})),e.subscribe("changeEnvironment")((function(e){var t=e.newQuadrant,n=e.environmentMode;if(L[t[1]]){var o=L[t[1]][n],r=o.fogNear,a=o.fogFar,i=o.color,u={color:c.fog.color,near:c.fog.near,far:c.fog.far},d={color:new B.Color(i),near:r,far:a};new Z.a(u).to(d,3e3).onUpdate((function(){c.fog.color=u.color,c.fog.near=u.near,c.fog.far=u.far,l.color=u.color,s.setClearColor(u.color)})).start()}})),{setCamera:function(e){return g=e},addToScene:y}}(i,e);new o(i);var n=ie(i);t.setCamera(n.getCamera()),t.addToScene(n.getObj());var r=function(e){var t=X(e),n={},o={};return e.collisionsBotsRooms={},e["level-rooms"].traverse((function(r){if(r.name.includes("room_")){var a=new B.Mesh(r.geometry);n[r.name]=a,a.name=r.name,o[r.name]=a}if(r.name.includes("collision_")){var i=new B.Mesh(r.geometry);e.collisionsBotsRooms[r.name]=i,i.name=r.name,o[r.name]=i}if(r.name.includes("outer_walls")){var s=new B.Mesh(r.geometry);s.name=r.name,o[r.name]=s}if(r.name.includes("outer_road")){var c=new B.Mesh(r.geometry,t.green);c.name=r.name,o[r.name]=c}if(r.name.includes("outer_floor")){var l=new B.Mesh(r.geometry,t.road);l.name=r.name,o[r.name]=l}})),{rooms:n,allMeshes:o,materials:t}}(e),a=r.allMeshes,c=r.rooms,l=r.materials,u=function(e,t,n){var o=new B.Group,r={},a=function n(a,i){var s=i||pe[Math.floor(Math.random()*pe.length)],c="r_".concat(a[0],"_").concat(a[1],"_").concat(a[2]),l=t[s].clone();l.position.set(a[0]*M,70*a[1],a[2]*M),ee(l),oe(l),o.add(l),r[c]=l,e.emit("levelChanged")({typeLevelChange:"createRoom",instanceKey:s,objKey:c,kv:a,isAddBot:"room_01"===s}),"room_06"===s&&n([a[0],a[1]+1,a[2]],"room_dummy")},i=function t(n){var a="r_".concat(n[0],"_").concat(n[1],"_").concat(n[2]);if(r[a]){var i=r[a].name;o.remove(r[a]),te(r[a]),re(r[a]),delete r[a],e.emit("levelChanged")({typeLevelChange:"destroyRoom",instanceKey:i,objKey:a,kv:n,isRemoveBot:"room_01"===i}),"room_dummy"===i&&t([n[0],n[1]-1,n[2]]),"room_06"===i&&t([n[0],n[1]+1,n[2]])}};a([0,-1,0],"room_02"),a([0,-1,-1],"room_02"),a([-1,-1,0],"room_02"),a([1,-1,0],"room_02");for(var s={},c=0;c<he.length;++c){var l=n[he[c]].clone();ee(l),oe(l),o.add(l),l.position.set(0,-70,0),s[he[c]]=l}e.subscribe("destroyStartCorridor")((function(){for(var e in s)te(s[e]),re(s[e]),o.remove(s[e])}));var u=0,d=!1;return e.subscribe("changeLevel")((function(e){e.direction;var t=e.oldQuadrant,n=e.newQuadrant,o=e.counter;console.log(t,n,o);var s=!1;o&&(u=o(u),console.log("wentLevels",u),d?d=!1:u<1||(u<10?(s="room_01",d=!0):(s="room_06",d=!0)),u>3&&2===n[1]&&(s="room_07"));var c=t,l=n;l[0]<c[0]&&(console.log("----------- west"),i([c[0]+1,c[1],c[2]]),r["r_".concat(l[0]+1,"_").concat(l[1],"_").concat(l[2])]=r["r_".concat(c[0],"_").concat(c[1],"_").concat(c[2])],a([c[0]-2,c[1],c[2]],s),i([c[0],c[1],c[2]-1]),a([l[0],l[1],l[2]-1],s),i([c[0],c[1],c[2]+1]),a([l[0],l[1],l[2]+1],s)),l[0]>c[0]&&(console.log("----------- east"),i([c[0]-1,c[1],c[2]]),r["r_".concat(l[0]-1,"_").concat(l[1],"_").concat(l[2])]=r["r_".concat(c[0],"_").concat(c[1],"_").concat(c[2])],a([c[0]+2,c[1],c[2]],s),i([c[0],c[1],c[2]-1]),a([l[0],l[1],l[2]-1],s),i([c[0],c[1],c[2]+1]),a([l[0],l[1],l[2]+1],s)),l[2]<c[2]&&(console.log("-----------north"),i([c[0],c[1],c[2]+1]),r["r_".concat(l[0],"_").concat(l[1],"_").concat(l[2]+1)]=r["r_".concat(c[0],"_").concat(c[1],"_").concat(c[2])],a([c[0],c[1],c[2]-2],s),i([c[0]-1,c[1],c[2]]),a([l[0]-1,l[1],l[2]],s),i([c[0]+1,c[1],c[2]]),a([l[0]+1,l[1],l[2]],s)),l[2]>c[2]&&(console.log("-----------south"),i([c[0],c[1],c[2]-1]),r["r_".concat(l[0],"_").concat(l[1],"_").concat(l[2]-1)]=r["r_".concat(c[0],"_").concat(c[1],"_").concat(c[2])],a([c[0],c[1],c[2]+2],s),i([c[0]-1,c[1],c[2]]),a([l[0]-1,l[1],l[2]],s),i([c[0]+1,c[1],c[2]]),a([l[0]+1,l[1],l[2]],s)),(l[1]>c[1]||l[1]<c[1])&&(console.log("-----------top"),i([c[0],c[1],c[2]-1]),a([l[0],l[1],l[2]-1]),i([c[0],c[1],c[2]+1]),a([l[0],l[1],l[2]+1]),i([c[0]-1,c[1],c[2]]),a([l[0]-1,l[1],l[2]]),i([c[0]+1,c[1],c[2]]),a([l[0]+1,l[1],l[2]]))})),{group:o}}(i,c,a).group;t.addToScene(u);var d=function(e,t,n){be.botMaterial=t.iron,be.botScene=e.bot;for(var o=new B.Group,r=[],a=0;a<5;++a){var i=new be;o.add(i.container),i.container.position.set(30*a-30,-92,750),i.inScene="aaa",i.setCollisionMesh(e.collisionsBotsRooms.collision_r_01.clone()),r.push(i)}return n.subscribe(A)((function(e){for(var t=0;t<r.length;++t)r[t].inScene&&r[t].update(e)})),n.subscribe("destroyStartCorridor")((function(){for(var e=0;e<r.length;++e)r[e].inScene=null,r[e].container.position.y=-1e4,r[e].removeCollisionMesh()})),n.subscribe("levelChanged")((function(t){t.typeLevelChange,t.instanceKey;var n=t.objKey,o=t.kv,a=t.isAddBot,i=t.isRemoveBot;if(a)for(var s=0;s<r.length;++s)if(!r[s].inScene){r[s].inScene=n,r[s].container.position.set(o[0]*Le,70*o[1]+14,o[2]*Le),r[s].setCollisionMesh(e.collisionsBotsRooms.collision_r_01.clone());break}if(i)for(var c=0;c<r.length;++c)r[c].inScene===n&&(r[c].inScene=null,r[c].container.position.y=-1e4,r[c].removeCollisionMesh())})),n.subscribe("playerMove")((function(e){for(var t=0;t<r.length;++t)if(r[t].inScene){var n=new B.Vector3;r[t]._modelGroup.getWorldPosition(n);var o=n.distanceTo(e);"say"===r[t]._state&&o>30?(r[t]._startRotate(),Ne(Me.dispatch).toggleButtonDialog(!1)):"say"!==r[t]._state&&o<30&&(r[t].prepareToSay(e),Ne(Me.dispatch).toggleButtonDialog(!0))}})),{groupBots:o}}(e,l,i);t.addToScene(d.groupBots),function(){var e=G();i.subscribe("playerMove")((function(t){var n=e.update(t),o=n.currentQuadrant,r=n.oldQuadrant;if(n.isChanged){var a=I(r,o);a.length&&a.forEach((function(e){return i.emit(e.emitKey)(e)}))}}))}(),setTimeout((function(){return n.start()}),500),function(e){var t=document.createElement("div");t.style.display="none",t.classList.add("info-cont");var n=document.createElement("div");n.classList.add("info-wrap"),t.appendChild(n);var o=document.createElement("div"),r=function(){o.innerHTML=fe('Previous part "Factory": '),o.innerHTML+="<a href='http://js.otrisovano.ru".concat(fe("/bridge"),'\' target="blanck">').concat(fe("link"),"</a></br>"),o.innerHTML+=fe("Author: "),o.innerHTML+="<a href='http://otrisovano.ru' target=\"blanck\">".concat(fe("link"),"</a></br>"),o.innerHTML+=fe("Github: "),o.innerHTML+="<a href='https://github.com/fire888/levels' target=\"blanck\">".concat(fe("link"),"</a></br>")};r(),n.appendChild(o);var a=document.createElement("button");a.classList.add("control"),a.innerText="x",a.addEventListener("click",(function(){t.style.display="none"})),n.appendChild(a),document.querySelector("#butt-info").addEventListener("click",(function(){t.style.display="flex"})),e.subscribe("setLanguage")((function(e){me=e,r()})),document.querySelector(".app-wrapper").appendChild(t)}(i),function(e){var t=document.querySelector(".startbuttons-wrapper"),n=document.querySelector(".progress-wrapper");le=!1,t.style.display="flex",t.addEventListener("click",(function(t){e.emit("setLanguage")(t.target.dataset.lang),document.querySelector(".start-screen").style.display="none"})),n.style.display="none"}(i)};window.addEventListener("load",(function(){return(e=k,new Promise((function(t){z=e,q=t,H=0,x=x||new K.a,C=C||new B.TextureLoader,Y=Y||new W.a,R=R||new B.CubeTextureLoader,V(z[H])}))).then(Fe);var e}))}},[[37,1,2]]]);
//# sourceMappingURL=main.383ec8a4.chunk.js.map