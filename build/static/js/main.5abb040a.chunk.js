(this.webpackJsonplevels=this.webpackJsonplevels||[]).push([[0],{40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var o,a=n(9),r=null,i=function(e){return function(t){return e[t]=e[t]||[]}},l=r=r||function(){var e={};return{emit:function(t){return function(n){return i(e)(t).forEach((function(e){return e(n)}))}},subscribe:function(t){return function(n){return i(e)(t).push(n),function(){return e[t]=e[t].filter((function(e){return e!==n}))}}},showAll:function(){var t={};for(var n in e)t[n]=e[n].length;console.log(t)}}}(),s=function(e){return{startPlay:function(){return e({type:"CHANGE_ENVIRONMENT",newQuadrant:[0,-1,-50],environmentMode:"outer"})},showBackground:function(){return e({type:"CHANGE_ENVIRONMENT",newQuadrant:[0,-1,-50],environmentMode:"back"})},startFinalFog:function(){return e({type:"CHANGE_ENVIRONMENT",newQuadrant:[0,-1,-50],environmentMode:"start"})}}},c=function(e){return{clickFullScreen:function(){e({type:"CLICK_FULL_SCREEN"})},exitFullScreen:function(){e({type:"EXIT_FULL_SCREEN"})}}},u=function(e){return{clickInfo:function(t){e({type:"INFO_TOGGLE",mode:t})}}},d=function(e){return{clickPhrase:function(t){e({type:"CLICK_PHRASE",phrase:t}),setTimeout((function(){e({type:"PHRASE_EVENT",phrase:t}),t.levelEvent&&l.emit("changeLevelMode")(t.levelEvent)}),1e3)},toggleDialog:function(t){e({type:"TOGGLE_DIALOG",isDialog:t})},toggleButtonDialog:function(t){e({type:"TOGGLE_BUTTON",isButtonDialog:t})}}},h=n(3),p={ru:(o={"Hello there!":"\u041f\u0440\u0438\u0432\u0435\u0442 !","Good day, carbon-based life form.":"\u0414\u0435\u043d\u044c \u0434\u043e\u0431\u0440\u044b\u0439, \u043a\u0440\u0435\u043c\u043d\u0438\u0435\u0432\u0430\u044f \u0444\u043e\u0440\u043c\u0430 \u0436\u0438\u0437\u043d\u0438.","What is this place ?":"\u0427\u0442\u043e \u044d\u0442\u043e \u0437\u0430 \u043c\u0435\u0441\u0442\u043e?","This is an entrance to the entropic hyper-maze.":"\u042d\u0442\u043e \u0432\u0445\u043e\u0434 \u0432 \u044d\u043d\u0442\u0440\u043e\u043f\u0438\u0439\u043d\u044b\u0439 \u0433\u0438\u043f\u0435\u0440-\u043a\u0443\u0431.","And what happens if I enter it ?":"\u0427\u0442\u043e \u0431\u0443\u0434\u0435\u0442, \u0435\u0441\u043b\u0438 \u044f \u0432\u043e\u0439\u0434\u0443 \u0432 \u043d\u0435\u0433\u043e?","This place is waiting.":"\u041a\u0443\u0431 \u043f\u0440\u0438\u043c\u0435\u0442 \u0442\u0435\u0431\u044f.","Say, where do these corridors lead ?":"\u041a\u0443\u0434\u0430 \u0432\u0435\u0434\u0443\u0442 \u044d\u0442\u0438 \u043a\u043e\u0440\u0438\u0434\u043e\u0440\u044b ?","They will lead you to the end.":"\u041e\u043d\u0438 \u043f\u0440\u0438\u0432\u0435\u0434\u0443\u0442 \u0442\u0435\u0431\u044f \u043a \u0444\u0438\u043d\u0430\u043b\u0443.","Ooook, I'm heading in then.":"\u042f \u043f\u043e\u0448\u0435\u043b \u0434\u0430\u043b\u044c\u0448\u0435.","We will meet again.":"\u041c\u044b \u0435\u0449\u0435 \u0443\u0432\u0438\u0434\u0438\u043c\u0441\u044f.","What do you do here ?":"\u0427\u0442\u043e \u0442\u044b \u0437\u0434\u0435\u0441\u044c \u0434\u0435\u043b\u0430\u0435\u0448\u044c ?","Collecting the energy of the night.":"\u0421\u043e\u0431\u0438\u0440\u0430\u044e \u044d\u043d\u0435\u0440\u0433\u0438\u044e \u043d\u043e\u0447\u0438.","Can you tell me which way is out of here ?":"\u0412 \u043a\u0430\u043a\u0443\u044e \u0441\u0442\u043e\u0440\u043e\u043d\u0443 \u043c\u043d\u0435 \u0438\u0434\u0442\u0438 ?","It is about the journey, not the destination":"\u0417\u0434\u0435\u0441\u044c \u043d\u0435\u0442 \u0441\u0442\u043e\u0440\u043e\u043d. \u0417\u0434\u0435\u0441\u044c \u0432\u0430\u0436\u043d\u0430 \u0442\u043e\u043b\u044c\u043a\u043e \u0434\u043b\u0438\u043d\u0430 \u043f\u0443\u0442\u0438.","Hey, it looks like I'm walking in circles.":"\u042f \u0443\u0436\u0435 \u0434\u043e\u043b\u0433\u043e \u0438\u0434\u0443.","You have walked long enough.":"\u0422\u044b \u043f\u0440\u043e\u0448\u0435\u043b \u0434\u043e\u0441\u0442\u0430\u0442\u043e\u0447\u043d\u043e \u0434\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u0443\u0440\u043e\u0432\u043d\u044f.","Meaning?":"\u0427\u0442\u043e \u044d\u0442\u043e \u0437\u043d\u0430\u0447\u0438\u0442?","The way to the next level is open to you.":"\u0422\u0435\u0431\u0435 \u043e\u0442\u043a\u0440\u044b\u0442 \u043f\u0443\u0442\u044c \u043d\u0430 \u043e\u0434\u043d\u0443 \u0441\u0442\u0443\u043f\u0435\u043d\u044c \u0432\u044b\u0448\u0435.",'Hi, I heard I can find the "end" around here?':"\u042f \u0438\u0449\u0443 \u0444\u0438\u043d\u0430\u043b.","Yes, I told you this is where the corridors lead.":"\u042f \u043f\u043e\u043c\u043d\u044e \u043e \u0442\u0432\u043e\u0435\u043c \u043f\u0443\u0442\u0438.","Man, you all look the same.":"\u0412\u044b \u0432\u0441\u0435 \u0442\u0430\u043a \u043f\u043e\u0445\u043e\u0436\u0438."},Object(h.a)(o,"We will meet again.","\u041c\u044b \u0435\u0449\u0435 \u0432\u0441\u0442\u0440\u0435\u0442\u0438\u043c\u0441\u044f."),Object(h.a)(o,"Soooo, is that you again ?","\u042d\u0442\u043e \u0441\u043d\u043e\u0432\u0430 \u0442\u044b?"),Object(h.a)(o,"Yes. All of me are myself.","\u0414\u0430, \u043c\u044b \u0432\u0441\u0435 \u0435\u0434\u0438\u043d\u044b."),Object(h.a)(o,"Yeah, just like those corridors.","\u0422\u0443\u0442 \u0432\u0441\u0435 \u043a\u043e\u0440\u0438\u0434\u043e\u0440\u044b \u043f\u043e\u0432\u0442\u043e\u0440\u044f\u044e\u0442\u0441\u044f."),Object(h.a)(o,"The meaning of everything is in being whole.","\u0421\u0443\u0442\u044c \u0432\u0441\u0435\u0433\u043e \u0432 \u0435\u0434\u0438\u043d\u043e\u043c."),Object(h.a)(o,"Am I there yet?","\u041a\u0430\u043a \u0434\u043e\u043b\u0433\u043e \u0435\u0449\u0435 \u0438\u0434\u0442\u0438."),Object(h.a)(o,"The sign will be given when you are.","\u0422\u0435\u0431\u0435 \u0431\u0443\u0434\u0435\u0442 \u0437\u043d\u0430\u043a, \u043a\u043e\u0433\u0434\u0430 \u0442\u044b \u0431\u0443\u0434\u0435\u0448\u044c \u0433\u043e\u0442\u043e\u0432."),Object(h.a)(o,"How do I know what it is?","\u041a\u0430\u043a \u044f \u0443\u0437\u043d\u0430\u044e \u044d\u0442\u043e\u0442 \u0437\u043d\u0430\u043a."),Object(h.a)(o,"I will give it to you.","\u042f \u043f\u043e\u0434\u0430\u043c \u0435\u0433\u043e."),Object(h.a)(o,"That's the same exact corridor with you again.","\u042d\u0442\u043e \u043e\u0434\u0438\u043d\u0430\u043a\u043e\u0432\u044b\u0439 \u0441\u0435\u0433\u043c\u0435\u043d\u0442 \u043a\u043e\u0440\u0438\u0434\u043e\u0440\u0430 \u0441 \u0442\u043e\u0431\u043e\u0439."),Object(h.a)(o,"You are ready for the next level.","\u0422\u044b \u0433\u043e\u0442\u043e\u0432 \u043a \u043d\u043e\u0432\u043e\u043c\u0443 \u0443\u0440\u043e\u0432\u043d\u044e."),Object(h.a)(o,"Hey man, seriously, how do I get out of here ?","\u041f\u0440\u0438\u0432\u0435\u0442 \u0441\u043d\u043e\u0432\u0430. \u041a\u0430\u043a \u0432\u044b\u0431\u0440\u0430\u0442\u044c\u0441\u044f. \u0423\u0436\u0435 \u043d\u0430\u0434\u043e\u0435\u043b\u043e."),Object(h.a)(o,"You have not reached the end.","\u0422\u044b \u043d\u0435 \u043f\u043e\u0441\u0442\u0438\u0433 \u0434\u0437\u0435\u043d."),Object(h.a)(o,"We'll how do you reach it ?","\u0422\u044b-\u0442\u043e \u043a\u0430\u043a \u0432\u044b\u0445\u043e\u0434\u0438\u0448\u044c \u043d\u0430 \u043f\u043e\u0432\u0435\u0440\u0445\u043d\u043e\u0441\u0442\u044c?"),Object(h.a)(o,"I have my way.","\u0423 \u043c\u0435\u043d\u044f \u0441\u0432\u043e\u0439 \u043f\u0443\u0442\u044c."),Object(h.a)(o,"So how's your way btw ?","\u0422\u044b \u0432\u0441\u0435 \u043d\u0430 \u0441\u0432\u043e\u0435\u043c \u043f\u0443\u0442\u0438?"),Object(h.a)(o,"It is like yourself.","\u041a\u0430\u043a \u0438 \u0442\u044b."),Object(h.a)(o,"And how long you've been on it ?","\u041a\u0430\u043a \u0434\u043e\u043b\u0433\u043e \u0442\u044b \u043d\u0430 \u043d\u0435\u043c?"),Object(h.a)(o,"These walls can hear us.","\u042d\u0442\u0438 \u0441\u0442\u0435\u043d\u044b \u043d\u0430\u0441 \u0441\u043b\u044b\u0448\u0430\u0442."),Object(h.a)(o,"I think you're weighing this corridor down.","\u041c\u043d\u0435 \u043a\u0430\u0436\u0435\u0442\u0441\u044f, \u0442\u044b \u0438\u0434\u0435\u0448\u044c \u0432 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0443 \u043a \u044d\u0442\u043e\u043c\u0443 \u0441\u0435\u0433\u043c\u0435\u043d\u0442\u0443 \u043a\u043e\u0440\u0438\u0434\u043e\u0440\u0430."),Object(h.a)(o,"The next level is open to you.","\u0422\u0435\u0431\u0435 \u043e\u0442\u043a\u0440\u044b\u0442 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439 \u0443\u0440\u043e\u0432\u0435\u043d\u044c."),Object(h.a)(o,"Look bud, next level or not, nothing's changed at all !","\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043c\u0435\u043d\u044f\u0435\u0442\u0441\u044f."),Object(h.a)(o,"Except the number of steps.","\u041c\u0435\u043d\u044f\u0435\u0442\u0441\u044f \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u0440\u043e\u0439\u0434\u0435\u043d\u043d\u044b\u0445 \u0448\u0430\u0433\u043e\u0432."),Object(h.a)(o,"So this place counts steps ?","\u042d\u0442\u043e \u043c\u0435\u0441\u0442\u043e \u0441\u0447\u0438\u0442\u0430\u0435\u0442 \u0448\u0430\u0433\u0438?"),Object(h.a)(o,"This is place is waiting.","\u042d\u0442\u043e \u043c\u0435\u0441\u0442\u043e \u0436\u0434\u0435\u0442."),Object(h.a)(o,"How long have you been here ?","\u041a\u0430\u043a \u0434\u0430\u0432\u043d\u043e \u0442\u044b \u0437\u0434\u0435\u0441\u044c?"),Object(h.a)(o,"How long is irrelevant. What matters is the journey.","\u0412\u0440\u0435\u043c\u044f \u043d\u0435 \u0438\u043c\u0435\u0435\u0442 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f, \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0438\u043c\u0435\u0435\u0442 \u043b\u0438\u0448\u044c \u043f\u0443\u0442\u044c."),Object(h.a)(o,"Then why aren't you on one?","\u041d\u043e \u0442\u044b \u0436\u0435 \u043d\u0435 \u0438\u0434\u0435\u0448\u044c."),Object(h.a)(o,"With you walking for both of us, I do not have to.","\u0417\u0430\u0442\u043e \u0442\u044b \u043a\u0430\u0436\u0434\u044b\u0439 \u0440\u0430\u0437 \u043f\u0440\u043e\u0445\u043e\u0434\u0438\u0448\u044c \u043c\u0438\u043c\u043e."),Object(h.a)(o,"Look, just make a new level, please.","\u0421\u0434\u0435\u043b\u0430\u0439 \u043d\u043e\u0432\u044b\u0439 \u0443\u0440\u043e\u0432\u0435\u043d\u044c."),Object(h.a)(o,"You are ready. It is waiting for you.","\u0422\u044b \u0433\u043e\u0442\u043e\u0432 - \u043d\u043e\u0432\u044b\u0439 \u0443\u0440\u043e\u0432\u0435\u043d\u044c \u0436\u0434\u0435\u0442 \u0442\u0435\u0431\u044f."),Object(h.a)(o,"Wait, you are this place! You control all its fragments.","\u0422\u044b \u0438 \u0435\u0441\u0442\u044c \u044d\u0442\u043e \u043c\u0435\u0441\u0442\u043e. \u0422\u044b \u0443\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0448\u044c \u0441\u0435\u0433\u043c\u0435\u043d\u0442\u0430\u043c\u0438."),Object(h.a)(o,"You have almost reached the end.","\u0422\u044b \u043f\u043e\u0447\u0442\u0438 \u0434\u043e\u0448\u0435\u043b \u0434\u043e \u043a\u0440\u0430\u044f."),Object(h.a)(o,"Why do you do this ?","\u0417\u0430\u0447\u0435\u043c \u0442\u0435\u0431\u0435 \u044d\u0442\u043e?"),Object(h.a)(o,"It is my way to warp space. More movement. More fragments.","\u042d\u0442\u043e \u0441\u043f\u043e\u0441\u043e\u0431 \u0441\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u043f\u0440\u043e\u0441\u0442\u0440\u0430\u043d\u0441\u0442\u0432\u043e. \u0411\u043e\u043b\u044c\u0448\u0435 \u0434\u0432\u0438\u0436\u0435\u043d\u0438\u044f. \u0411\u043e\u043b\u044c\u0448\u0435 \u0441\u0435\u0433\u043c\u0435\u043d\u0442\u043e\u0432."),Object(h.a)(o,"How many people have been through here ?","\u041a\u0430\u043a \u043c\u043d\u043e\u0433\u043e \u043f\u0443\u0442\u043d\u0438\u043a\u043e\u0432 \u043f\u043e\u043f\u0430\u0434\u0430\u043b\u043e \u0441\u044e\u0434\u0430?"),Object(h.a)(o,"Many are still here.","\u041c\u043d\u043e\u0433\u0438\u0435 \u0438\u0437 \u043d\u0438\u0445 \u0434\u043e \u0441\u0438\u0445 \u043f\u043e\u0440 \u0442\u0443\u0442."),Object(h.a)(o,"So where are they?","\u041f\u043e\u0447\u0435\u043c\u0443 \u044f \u0438\u0445 \u043d\u0435 \u0432\u0441\u0442\u0440\u0435\u0442\u0438\u043b?"),Object(h.a)(o,"Everyone has a different system of fragments.","\u0423 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0441\u0432\u043e\u044f \u0441\u0438\u0441\u0442\u0435\u043c\u0430 \u0441\u0435\u0433\u043c\u0435\u043d\u0442\u043e\u0432."),Object(h.a)(o,"Will you let me out ?","\u0422\u044b \u0432\u044b\u043f\u0443\u0441\u0442\u0438\u0448\u044c \u043c\u0435\u043d\u044f?"),Object(h.a)(o,"All ways lead to the end.","\u0412\u0441\u0435 \u0441\u0442\u043e\u0440\u043e\u043d\u044b \u0441\u0432\u0435\u0442\u0430 \u043e\u0442\u043a\u0440\u044b\u0442\u044b \u0442\u0435\u0431\u0435."),Object(h.a)(o,"I wanna meet the others.","\u042f \u0445\u043e\u0447\u0443 \u0432\u0441\u0442\u0440\u0435\u0442\u0438\u0442\u044c \u0434\u0440\u0443\u0433\u0438\u0445."),Object(h.a)(o,"The next level is waiting for you.","\u0422\u0435\u0431\u0435 \u043e\u0442\u043a\u0440\u044b\u0442 \u043d\u043e\u0432\u044b\u0439 \u0443\u0440\u043e\u0432\u0435\u043d\u044c."),Object(h.a)(o,"Everything's looped here.","\u042f \u0432\u0438\u0436\u0443 \u0437\u0430\u0440\u0435\u0432\u043e?"),Object(h.a)(o,"Everything is looped with small differences.","\u042d\u0442\u043e \u0437\u0430\u0440\u0435\u0432\u043e \u043f\u0440\u043e\u0441\u0432\u0435\u0442\u043b\u0435\u043d\u0438\u044f. \u0422\u044b \u0431\u043b\u0438\u0437\u043e\u043a"),Object(h.a)(o,"How many levels even are there ?","\u0412\u0441\u0435 \u043a\u043e\u0440\u0438\u0434\u043e\u0440\u044b \u043f\u043e\u0432\u0442\u043e\u0440\u044f\u044e\u0442\u0441\u044f."),Object(h.a)(o,"It all depends on you.","\u0412\u0441\u0435 \u043f\u043e\u0432\u0442\u043e\u0440\u044f\u0435\u0442\u0441\u044f \u0441 \u043d\u0435\u0431\u043e\u043b\u044c\u0448\u043e\u0439 \u0440\u0430\u0437\u043d\u0438\u0446\u0435\u0439."),Object(h.a)(o,"That's it, I'm done.","\u0412\u0441\u0435 \u043c\u043e\u0439 \u043f\u0443\u0442\u044c \u043e\u043a\u043e\u043d\u0447\u0435\u043d."),Object(h.a)(o,"Have you reached your journey's end ?","\u0422\u044b \u043e\u0442\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0448\u044c\u0441\u044f \u0438\u0434\u0442\u0438?"),Object(h.a)(o,"Yes, you mad bastard! I have !","\u0414\u0430, \u0442\u044b \u0431\u0435\u0437\u0443\u043c\u0435\u043d."),Object(h.a)(o,"Then I am giving you the sign.","\u042f \u043e\u0441\u0432\u043e\u0431\u043e\u0436\u0434\u0430\u044e \u0442\u0435\u0431\u044f."),Object(h.a)(o,"open dialog","\u043d\u0430\u0447\u0430\u0442\u044c \u0434\u0438\u0430\u043b\u043e\u0433"),Object(h.a)(o,"close dialog","\u0437\u0430\u043a\u043e\u043d\u0447\u0438\u0442\u044c \u0434\u0438\u0430\u043b\u043e\u0433"),Object(h.a)(o,"To be continued","\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0435\u043d\u0438\u0435 \u0441\u043b\u0435\u0434\u0443\u0435\u0442"),Object(h.a)(o,"chapter","\u0433\u043b\u0430\u0432\u0430"),Object(h.a)(o,"open","\u043f\u0443\u0441\u043a"),Object(h.a)(o,"Author: ","\u0410\u0432\u0442\u043e\u0440: "),Object(h.a)(o,"link","\u0441\u0441\u044b\u043b\u043a\u0430"),o)},f="en";l.subscribe("setLanguage")((function(e){f=e}));var m=function(e){return p[f]&&p[f][e]||e},v=n(6),b=Object(a.b)((function(e){return{userReplicies:e.app.ui.userReplicies}}))((function(e){return Object(v.jsx)("div",{className:"userReplicies",children:e.userReplicies.map((function(t){return Object(v.jsx)("button",{onClick:function(){d(e.dispatch).clickPhrase(t)},children:m(t.q)},Math.floor(1e5*Math.random()))}))})})),g=Object(a.b)((function(e){return{botAnswers:e.app.ui.botAnswers}}))((function(e){return Object(v.jsx)("div",{className:"botAnswers",children:e.botAnswers.map((function(e){return Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{className:"q",children:m(e.q)}),Object(v.jsx)("div",{className:"a",children:m(e.a)})]},Math.floor(1e5*Math.random()))}))})}));var y={dispatch:null},w=Object(a.b)((function(e){return{isButtonDialog:e.app.ui.isButtonDialog,isDialog:e.app.ui.isDialog,isShowClickFullScreen:e.app.ui.isShowButtFullScreen,isShowInfo:e.app.ui.isShowInfo,isShowFinalMessage:e.app.ui.isShowFinalMessage}}))((function(e){return!y.dispatch&&(y.dispatch=e.dispatch),Object(v.jsxs)("div",{className:"ui",children:[e.isButtonDialog&&Object(v.jsx)("button",{className:"butt-toggleDialog",onClick:function(){d(e.dispatch).toggleDialog(!e.isDialog)},children:e.isDialog?m("close dialog"):m("open dialog")}),!e.isDialog&&Object(v.jsx)("button",{className:"butt-left control",onMouseDown:function(){return l.emit("mouseDown")("butt-left")},onTouchStart:function(){return l.emit("mouseDown")("butt-left")},onMouseUp:function(){return l.emit("mouseUp")("butt-left")},onTouchEnd:function(){return l.emit("mouseUp")("butt-left")},children:"\u25c4"}),!e.isDialog&&Object(v.jsx)("button",{className:"butt-right control",onMouseDown:function(){return l.emit("mouseDown")("butt-right")},onTouchStart:function(){return l.emit("mouseDown")("butt-right")},onMouseUp:function(){return l.emit("mouseUp")("butt-right")},onTouchEnd:function(){return l.emit("mouseUp")("butt-right")},children:"\u25ba"}),!e.isDialog&&Object(v.jsx)("button",{className:"butt-front control",onMouseDown:function(){return l.emit("mouseDown")("butt-front")},onTouchStart:function(){return l.emit("mouseDown")("butt-front")},onMouseUp:function(){return l.emit("mouseUp")("butt-front")},onTouchEnd:function(){return l.emit("mouseUp")("butt-front")},children:"\u25b2"}),!e.isDialog&&e.isShowClickFullScreen&&Object(v.jsx)("button",{className:"butt-fullscreen control",onClick:function(){l.emit("mouseDown")("butt-fullscreen"),c(e.dispatch).clickFullScreen()},children:"\u2752"}),!e.isDialog&&!e.isShowInfo&&Object(v.jsx)("button",{className:"butt-info control",onClick:function(){return u(e.dispatch).clickInfo(!0)},children:"i"}),e.isDialog&&Object(v.jsx)("div",{className:"dialog",children:Object(v.jsxs)("div",{className:"dialog-inner",children:[Object(v.jsx)(g,{}),Object(v.jsx)(b,{})]})}),e.isShowFinalMessage&&Object(v.jsx)("div",{className:"info",children:Object(v.jsx)("div",{className:"info-inner final-message",children:Object(v.jsx)("p",{children:m("To be continued")})})}),e.isShowInfo&&Object(v.jsx)("div",{className:"info",children:Object(v.jsxs)("div",{className:"info-inner",children:[Object(v.jsx)("button",{className:"control butt-infoClose",onClick:function(){return u(e.dispatch).clickInfo(!1)},children:"x"}),Object(v.jsxs)("p",{children:["1 ".concat(m("chapter"),": "),Object(v.jsx)("a",{href:"http://js.otrisovano.ru/factory/",target:"blank",children:m("link")})]}),Object(v.jsxs)("p",{children:["2 ".concat(m("chapter"),": "),Object(v.jsx)("a",{href:"http://js.otrisovano.ru/bridge/",target:"blank",children:m("link")})]}),Object(v.jsxs)("p",{children:[Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),m("Author: "),Object(v.jsx)("a",{href:"http://otrisovano.ru",target:"blank",children:m("link")})]}),Object(v.jsxs)("p",{children:[m("Github: "),Object(v.jsx)("a",{href:"https://github.com/fire888/levels/",target:"blank",children:m("link")})]})]})})]})}));function j(e){var t={up:!1,left:!1,right:!1,s:!1,m:!1,w:!1},n=function(n,o){switch(n){case 38:t.up=o;break;case 37:t.left=o;break;case 39:t.right=o;break;case 83:t.s=o;break;case 77:t.m=o;break;case 87:t.w=o}e.emit("keyEvent")(t)};document.addEventListener("keydown",(function(e){return n(e.keyCode,!0)})),document.addEventListener("keyup",(function(e){return n(e.keyCode,!1)})),e.subscribe("mouseDown")((function(e){"butt-left"===e&&n(37,!0),"butt-right"===e&&n(39,!0),"butt-front"===e&&n(38,!0)})),e.subscribe("mouseUp")((function(e){"butt-left"===e&&n(37,!1),"butt-right"===e&&n(39,!1),"butt-front"===e&&n(38,!1)}))}var O=n(43),_=n.p+"static/media/px.2be78f43.jpg",N=n.p+"static/media/nx.b2401269.jpg",S=n.p+"static/media/py.659ebc34.jpg",E=n.p+"static/media/ny.462f1251.jpg",A=n.p+"static/media/pz.8ea5ba14.jpg",M=n.p+"static/media/nz.7f255b96.jpg",k=n.p+"static/media/posx.be2d83a2.jpg",x=n.p+"static/media/negx.d016c8e7.jpg",T=n.p+"static/media/posy.01cfd221.jpg",I=n.p+"static/media/negy.f01f8356.jpg",R=n.p+"static/media/posz.ef37b8e1.jpg",D=n.p+"static/media/negz.f346a80a.jpg",C=n.p+"static/media/level-rooms.5251ade2.obj",F=n.p+"static/media/floor_outer_map.35e50f6e.jpg",L=n.p+"static/media/botMap.972e276e.png",Y=[{type:"obj",filename:C,key:"level-rooms"},{type:"glb",filename:n.p+"static/media/botAnim2.47b6030d.glb",key:"bot"},{type:"cubeTextures",filename:{px:_,nx:N,py:S,ny:E,pz:A,nz:M},key:"skyBox"},{type:"cubeTextures",filename:{px:k,nx:x,py:T,ny:I,pz:R,nz:D},key:"ironEnv"},{type:"img",filename:L,key:"botMap"},{type:"img",filename:F,key:"mapFloorOuter",wrap:!0}],Q={iron:{mat:"MeshPhongMaterial",props:{color:16777215,emissive:13192,specular:16777215,shininess:60,bumpMap:"botMap",bumpScale:.1,envMap:"ironEnv",reflectivity:.5,map:"botMap",skinning:!0}},wall:{mat:"MeshPhongMaterial",props:{color:17510,emissive:16777215,map:"mapFloorOuter",bumpMap:"mapFloorOuter",bumpScale:1,envMap:"skyBox",reflectivity:.5,specular:2236962}},green:{mat:"MeshPhongMaterial",props:{color:17510,emissive:16777215,map:"mapFloorOuter",bumpMap:"mapFloorOuter",bumpScale:1,envMap:"skyBox",reflectivity:.5}},road:{mat:"MeshPhongMaterial",props:{color:10556063,emissive:10556063,map:"mapFloorOuter",bumpMap:"mapFloorOuter",bumpScale:1,envMap:"skyBox",reflectivity:.5}}},G=175.335,q="FRAME_UPDATE",H={"-2":{outer:{fogNear:-200,fogFar:500,color:1582461},corridorLight:{fogNear:-40,fogFar:150,color:7012460},default:{fogNear:-40,fogFar:150,color:8914344}},"-1":{start:{fogNear:0,fogFar:5,color:1582461},outer:{fogNear:20,fogFar:500,color:1582461},back:{fogNear:20,fogFar:500,color:1582461,backgroundImgKey:"skyBox"},firstRoomLight:{fogNear:-40,fogFar:150,color:9054},corridorLight:{fogNear:-40,fogFar:150,color:7012460},default:{fogNear:-40,fogFar:150,color:3019147}},0:{default:{fogNear:-40,fogFar:150,color:3950848}},1:{default:{fogNear:-40,fogFar:150,color:933458}},2:{default:{fogNear:0,fogFar:80,color:661347}},3:{default:{fogNear:0,fogFar:80,color:680768}},4:{default:{fogNear:0,fogFar:80,color:11272192}}},P={canId:"webgl-canvas",rendererCon:{antialias:!0},clearColor:H[-1].outer.color,backgroundColor:H[-1].outer.color,amb:{color:H[-1].outer.color,strength:.7}},U={speed:.8,speedRot:.02,speedDown:-.45,offsetFromFloor:10,offsetFromFloorFactor:.5,offsetWallCollision:3.5,level:-13,startRot:[0,0,0],startPos:[100,-60,1e3],cameraData:{fov:90,ratio:window.innerWidth/window.innerHeight,near:.1,far:1e3,pos:[0,2,-.5]},frontObjPos:[0,0,-1],lightDataOne:{color:16777215,strength:5e3,pos:[0,50,5]}};var B,K,W,z,V=n(7),X=n(4),J=[{oldState:"outer",newState:"corridor",oldQuadrant:[0,-2,4],newQuadrant:[0,-2,3],emitData:[{emitKey:"CHANGE_ENVIRONMENT",environmentMode:"corridorLight",backgroundImg:!1}]},{oldState:"corridor",newState:"outer",oldQuadrant:[0,-2,3],newQuadrant:[0,-2,4],emitData:[{emitKey:"CHANGE_ENVIRONMENT",environmentMode:"outer"}]},{oldState:"corridor",newState:"firstRoom",oldQuadrant:[0,-1,2],newQuadrant:[0,-1,1],emitData:[{emitKey:"CHANGE_ENVIRONMENT",environmentMode:"firstRoomLight"}]},{oldState:"firstRoom",newState:"corridor",oldQuadrant:[0,-1,1],newQuadrant:[0,-1,2],emitData:[{emitKey:"CHANGE_ENVIRONMENT",environmentMode:"corridorLight"}]},{oldState:"firstRoom",newState:"playLevel",oldQuadrant:[0,-1,0],newQuadrant:[0,-1,"ANY_MINUS_ONE"],emitData:[{emitKey:"DESTROY_START_CORRIDOR"},{emitKey:"CHANGE_QUADRANT"}]},{oldState:"firstRoom",newState:"playLevel",oldQuadrant:[0,-1,0],newQuadrant:["ANY_MINUS_ONE",-1,0],emitData:[{emitKey:"DESTROY_START_CORRIDOR"},{emitKey:"CHANGE_QUADRANT"}]},{oldState:"firstRoom",newState:"playLevel",oldQuadrant:[0,-1,0],newQuadrant:["ANY_PLUS_ONE",-1,0],emitData:[{emitKey:"DESTROY_START_CORRIDOR"},{emitKey:"CHANGE_QUADRANT"}]},{oldState:"playLevel",newState:"playLevel",oldQuadrant:["ANY","ANY","ANY"],newQuadrant:["ANY","ANY_PLUS_ONE","ANY"],emitData:[{emitKey:"CHANGE_ENVIRONMENT",environmentMode:"default"},{emitKey:"CHANGE_QUADRANT",counter:function(){return 0}}]},{oldState:"playLevel",newState:"playLevel",oldQuadrant:["ANY","ANY","ANY"],newQuadrant:["ANY","ANY_MINUS_ONE","ANY"],emitData:[{emitKey:"CHANGE_ENVIRONMENT",environmentMode:"default"},{emitKey:"CHANGE_QUADRANT",counter:function(){return 100}}]},{oldState:"playLevel",newState:"playLevel",oldQuadrant:["ANY","ANY","ANY"],newQuadrant:["ANY","ANY","ANY_MINUS_ONE"],emitData:[{emitKey:"CHANGE_QUADRANT",counter:function(e){return++e}}]},{oldState:"playLevel",newState:"playLevel",oldQuadrant:["ANY","ANY","ANY"],newQuadrant:["ANY_MINUS_ONE","ANY","ANY"],emitData:[{emitKey:"CHANGE_QUADRANT",counter:function(e){return++e}}]},{oldState:"playLevel",newState:"playLevel",oldQuadrant:["ANY","ANY","ANY"],newQuadrant:["ANY_PLUS_ONE","ANY","ANY"],emitData:[{emitKey:"CHANGE_QUADRANT",counter:function(e){return++e}}]},{oldState:"playLevel",newState:"playLevel",oldQuadrant:["ANY","ANY","ANY"],newQuadrant:["ANY","ANY","ANY_PLUS_ONE"],emitData:[{emitKey:"CHANGE_QUADRANT",counter:function(e){return++e}}]}],Z="outer",$=function(e,t){for(var n=0;n<J.length;++n){var o=ee(Object(V.a)(e),Object(V.a)(t),Object(X.a)(Object(X.a)({},J[n]),{},{oldQuadrant:Object(V.a)(J[n].oldQuadrant),newQuadrant:Object(V.a)(J[n].newQuadrant)}));if(o)return o}return{levelState:Z}},ee=function(e,t,n){var o=n.oldState,a=n.newState,r=n.oldQuadrant,i=n.newQuadrant,l=n.emitData;if(Z===o&&("ANY"===r[0]&&(r[0]=e[0]),"ANY"===r[1]&&(r[1]=e[1]),"ANY"===r[2]&&(r[2]=e[2]),"ANY"===i[0]&&(i[0]=t[0]),"ANY"===i[1]&&(i[1]=t[1]),"ANY"===i[2]&&(i[2]=t[2]),"ANY_PLUS_ONE"===i[0]&&(i[0]=e[0]+1),"ANY_PLUS_ONE"===i[1]&&(i[1]=e[1]+1),"ANY_PLUS_ONE"===i[2]&&(i[2]=e[2]+1),"ANY_MINUS_ONE"===i[0]&&(i[0]=e[0]-1),"ANY_MINUS_ONE"===i[1]&&(i[1]=e[1]-1),"ANY_MINUS_ONE"===i[2]&&(i[2]=e[2]-1),r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]&&i[0]===t[0]&&i[1]===t[1]&&i[2]===t[2]))return Z=a,l.map((function(e){return Object(X.a)(Object(X.a)({},e),{},{levelState:Z,oldQuadrant:Object(V.a)(r),newQuadrant:Object(V.a)(i)})}))},te=function(){var e=[];return{update:function(t){var n=t.x,o=t.y,a=t.z,r=[Math.floor(n/G),Math.floor(o/70),Math.floor(a/G)];if(r[0]!==e[0]||r[1]!==e[1]||r[2]!==e[2]){var i={isChanged:!0,currentQuadrant:r,oldQuadrant:e};return e=[].concat(r),i}return{isChanged:!1}}}},ne=n(0),oe=n(22),ae=n(23),re=null,ie=null,le={},se=0,ce=function(e){"obj"===e.type&&B.load(e.filename,(function(t){le[e.key]=t,ue()})),"glb"!==e.type&&"gltf"!==e.type||W.load(e.filename,(function(t){le[e.key]=t,ue()})),"img"===e.type&&K.load(e.filename,(function(t){le[e.key]=t,ue()})),"cubeTextures"===e.type&&z.load([e.filename.px,e.filename.nx,e.filename.py,e.filename.ny,e.filename.pz,e.filename.nz],(function(t){le[e.key]=t,ue()}))},ue=function(){++se<ie.length?ce(ie[se]):re(le)};var de=function(e){for(var t in e)e[t].wrapS&&(e[t].wrapS=e[t].wrapT=ne.RepeatWrapping);var n=["bumpMap","envMap","map","normalMap","lightMap","aoMap"],o={},a=function(t){o[t]=new ne[Q[t].mat](Object(X.a)({},Q[t].props)),n.map((function(n){return Q[t].props[n]&&(o[t][n]=e[Q[t].props[n]])}))};for(var r in Q)a(r);return o},he=n(15),pe=n(26),fe=n(24),me=n(13),ve={uniforms:{tDiffuse:{value:null}},vertexShader:"\nvarying vec2 vUv;\n\nvoid main() {\n    vUv = uv;\n    gl_Position = projectionMatrix*modelViewMatrix*vec4( position, 1.0 );\n}",fragmentShader:"\n\nuniform sampler2D tDiffuse;\nvarying vec2 vUv;\nvoid main() {\n    vec4 texel = texture2D( tDiffuse, vUv );\n    gl_FragColor = (texel * texel * texel) * vec4(3.);\n\n}"};var be=[],ge=function(e){return be.push(e)},ye=function(e){return be=be.filter((function(t){return t!==e}))},we=[],je=function(e){return we.push(e)},Oe=function(e){return we=we.filter((function(t){return e!==t}))},_e=[];function Ne(e){var t,n=e,o=U.startPos,a=U.startRot,r=U.cameraData,i=U.frontObjPos,l=U.lightDataOne,c=U.speed,u=U.offsetFromFloor,d=U.offsetFromFloorFactor,h=U.speedDown,p=U.offsetWallCollision,f=U.speedRot,m={},v=!1,b=!0,g=new ne.Object3D;g.position.fromArray(o),g.rotation.fromArray(a);var w=new ne.Object3D;w.position.fromArray(i),g.add(w);var j=r.fov,O=r.ratio,_=r.near,N=r.far,S=r.pos;(t=new ne.PerspectiveCamera(j,O,_,N)).position.fromArray(S),g.add(t);var E=l.color,A=l.strenth,M=l.pos,k=new ne.PointLight(E,A);k.position.fromArray(M),g.add(k);var x=function(e,t,n,o){var a=e,r=t,i=n,l=o,s=new ne.Vector3,c=new ne.Vector3(0,-1,0),u=!0;return{check:function(e){if(!u){s.copy(a.position);var t=new ne.Raycaster(s,c).intersectObjects(be);t&&t[0]&&t[0].distance>r+i?a.position.y+=l*e.count:!t||t[0]?a.position.y=t[0].point.y+r:a.position.y+=l*e.count}},start:function(){u=!1}}}(g,u,d,h),T=function(e,t,n){var o=n,a=e,r=t,i=new ne.Vector3,l=new ne.Vector3;return{check:function(){r.getWorldPosition(l),i.copy(a.position),l.sub(i);var e=new ne.Raycaster(i,l).intersectObjects(we);return e[0]&&e[0].distance<o}}}(g,w,p),I=function(e,t){return function(){_e.forEach((function(n){e.position.distanceTo(n.position)<10&&!n.userData.nearPlayer&&(n.userData.nearPlayer=!0,t.emit("nearMesh")({toNear:!0,mesh:n})),e.position.distanceTo(n.position)>=10&&n.userData.nearPlayer&&(n.userData.nearPlayer=!1,t.emit("nearMesh")({toNear:!1,mesh:n}))}))}}(g,n),R=g.position.y,D=0,C=!1;return n.subscribe("keyEvent")((function(e){return m=e})),n.subscribe(q)((function(e){if(!v&&!b&&(x.check(e),m)){if(m.up){if(T.check())return;g.translateZ(-c*e.count),I(),n.emit("playerMove")(g.position)}m.left&&(g.rotation.y+=f*e.count),m.right&&(g.rotation.y-=f*e.count),R>g.position.y?++D:D=0,R=g.position.y,D>800&&!C&&(C=!0,setTimeout((function(){s(y.dispatch).startFinalFog(),setTimeout((function(){var e;(e=y.dispatch,{toggleFinalMessage:function(t){return e({type:"TOGGLE_FINAL_MESSAGE",mode:t})}}).toggleFinalMessage(!0)}),6e3)}),1e4))}})),n.subscribe("toggleDialog")((function(e){return v=e.isOpen})),{start:function(){b=!1,x.start()},getObj:function(){return g},getCamera:function(){return t},setToPos:function(e,t,n){return g.position.set(e,t,n)}}}n(40);var Se=document.querySelector(".progress"),Ee=-100,Ae=!0;!function e(){Ae&&setTimeout((function(){0===++Ee&&(Ee-=100),Se.style.marginLeft=Ee+"%",e()}),30)}();var Me=["room_02","room_03","room_04","room_05"],ke=["outer_walls","outer_floor","outer_road"];var xe=n(1),Te=n(2),Ie={x:55,z:75},Re=function(){function e(){Object(xe.a)(this,e),this.inScene=!1,this._state="go",this._targetAngle=null,this.container=new ne.Group,this._modelGroup=new ne.Group,this._modelGroup.position.x=Ie.x,this._modelGroup.position.z=Ie.z,this._modelGroup.rotation.y=Math.random()*(2*Math.PI),this.container.add(this._modelGroup),this._objFrom=new ne.Object3D,this._modelGroup.add(this._objFrom),this._objTo=new ne.Object3D,this._objTo.position.set(0,0,1),this._modelGroup.add(this._objTo);var t=function(e){var t={animations:e.animations,scene:e.scene.clone(!0)},n={};e.scene.traverse((function(e){e.isSkinnedMesh&&(n[e.name]=e)}));var o={},a={};for(var r in t.scene.traverse((function(e){e.isBone&&(o[e.name]=e),e.isSkinnedMesh&&(a[e.name]=e)})),n){for(var i=n[r].skeleton,l=a[r],s=[],c=0;c<i.bones.length;++c){var u=o[i.bones[c].name];s.push(u)}l.bind(new ne.Skeleton(s,i.boneInverses),l.matrixWorld)}return t}(e.botScene);this.model=t.scene.children[0],this.model.children[1].material=e.botMaterial,this._animations=e.botScene.animations,this._mixer=new ne.AnimationMixer(this.model.children[1]),this._walkAction=this._mixer.clipAction(this._animations[1]),this._walkAction.play(),this._walkAction.timeScale=.7,this._speakAction=this._mixer.clipAction(this._animations[0]),this._speakAction.timeScale=.4,this._modelGroup.add(this.model)}return Object(Te.a)(e,[{key:"update",value:function(e){this._mixer.update(e.delta),this._componentCollision&&this._updateState()}},{key:"setCollisionMesh",value:function(e){this._collisionMeshes=[e],this.container.add(e),e.material.visible=!1,this._componentCollision=De(this._objFrom,this._objTo,7,this._collisionMeshes)}},{key:"removeCollisionMesh",value:function(){this._collisionMeshes=null,this._componentCollision=null}},{key:"prepareToSay",value:function(e){this._state="say",this._walkAction.stop(),this._speakAction.play(),this._modelGroup.lookAt(e.x,this.container.position.y,e.z)}},{key:"_updateState",value:function(){"go"===this._state&&(this._componentCollision.check()?this._startRotate():this._modelGroup.translateZ(.05));"rotate"===this._state&&(this._modelGroup.rotation.y+=this._targetAngle-this._modelGroup.rotation.y<0?-.01:.01,this._modelGroup.rotation.y%=2*Math.PI,Math.abs(this._modelGroup.rotation.y-this._targetAngle)<.5&&this._startGo())}},{key:"_startGo",value:function(){this._state="go",this._walkAction.play(),this._speakAction.stop()}},{key:"_startRotate",value:function(){this._state="rotate",this._targetAngle=(this._modelGroup.rotation.y+1.5+4*Math.random())%(2*Math.PI)}}]),e}();Re.botScene=null,Re.botMaterial=null;var De=function(e,t,n,o){var a=new ne.Vector3,r=new ne.Vector3;return{check:function(){return t.getWorldPosition(r),e.getWorldPosition(a),r.sub(a),!!new ne.Raycaster(a,r,0,20).intersectObject(o[0],!0)[0]}}},Ce=175.335,Fe=(n(5),n(14)),Le=n.n(Fe),Ye=n(10),Qe=n(25),Ge={sceneEnvironment:{color:H[-1].start.color,fogNear:H[-1].start.fogNear,fogFar:H[-1].start.fogFar,backgroundImgKey:null},playerQuadrant:{oldDialogPlayerQuadrant:[0,0,-50],oldQuadrant:[0,0,0],newQuadrant:[0,0,0],counter:null},level:{isStartCorridorShow:!0},ui:{isShowButtFullScreen:!0,isShowInfo:!1,isShowFinalMessage:!1,botAnswers:[],userReplicies:[],history:[],isDialog:!1,isButtonDialog:!1},botIndex:-1,phraseIndex:0,phrasesData:[{phrases:[{q:"Hello there!",a:"Good day, carbon-based life form.",event:"nextReply",levelEvent:null},{q:"What is this place ?",a:"This is an entrance to the entropic hyper-maze.",event:"nextReply",levelEvent:null},{q:"And what happens if I enter it ?",a:"This place is waiting.",event:"close",levelEvent:null}]},{phrases:[{q:"Say, where do these corridors lead ?",a:"They will lead you to the end.",event:"nextReply",levelEvent:null},{q:"Ooook, I'm heading in then.",a:"We will meet again.",event:"close",levelEvent:null}]},{phrases:[{q:"What do you do here ?",a:"Collecting the energy of the night.",event:"nextReply",levelEvent:null},{q:"Can you tell me which way is out of here ?",a:"It is about the journey, not the destination",event:"close",levelEvent:null}]},{phrases:[{q:"Hey, it looks like I'm walking in circles.",a:"You have walked long enough.",event:"nextReply",levelEvent:null},{q:"Meaning?",a:"The way to the next level is open to you.",event:"close",levelEvent:"addStairs"}]},{phrases:[{q:'Hi, I heard I can find the "end" around here?',a:"Yes, I told you this is where the corridors lead.",event:"nextReply",levelEvent:null},{q:"Man, you all look the same.",a:"We will meet again.",event:"close",levelEvent:null}]},{phrases:[{q:"Soooo, is that you again ?",a:"Yes. All of me are myself.",event:"nextReply",levelEvent:null},{q:"Yeah, just like those corridors.",a:"The meaning of everything is in being whole.",event:"close",levelEvent:null}]},{phrases:[{q:"Am I there yet?",a:"The sign will be given when you are.",event:"nextReply",levelEvent:null},{q:"How do I know what it is?",a:"I will give it to you.",event:"close",levelEvent:null}]},{phrases:[{q:"That's the same exact corridor with you again.",a:"You are ready for the next level.",event:"close",levelEvent:"addStairs"}]},{phrases:[{q:"Hey man, seriously, how do I get out of here ?",a:"You have not reached the end.",event:"nextReply",levelEvent:null},{q:"We'll how do you reach it ?",a:"I have my way.",event:"close",levelEvent:null}]},{phrases:[{q:"So how's your way btw ?",a:"It is like yourself.",event:"nextReply",levelEvent:null},{q:"And how long you've been on it ?",a:"These walls can hear us.",event:"close",levelEvent:null}]},{phrases:[{q:"I think you're weighing this corridor down.",a:"The next level is open to you.",event:"close",levelEvent:"addStairs"}]},{phrases:[{q:"Look bud, next level or not, nothing's changed at all !",a:"Except the number of steps.",event:"nextReply",levelEvent:null},{q:"So this place counts steps ?",a:"This is place is waiting.",event:"close",levelEvent:null}]},{phrases:[{q:"How long have you been here ?",a:"How long is irrelevant. What matters is the journey.",event:"nextReply",levelEvent:null},{q:"Then why aren't you on one?",a:"With you walking for both of us, I do not have to.",event:"close",levelEvent:null}]},{phrases:[{q:"Look, just make a new level, please.",a:"You are ready. It is waiting for you.",event:"close",levelEvent:"addStairs"}]},{phrases:[{q:"Wait, you are this place! You control all its fragments.",a:"You have almost reached the end.",event:"nextReply",levelEvent:null},{q:"Why do you do this ?",a:"It is my way to warp space. More movement. More fragments.",event:"close",levelEvent:null}]},{phrases:[{q:"How many people have been through here ?",a:"Many are still here.",event:"nextReply",levelEvent:null},{q:"So where are they?",a:"Everyone has a different system of fragments.",event:"close",levelEvent:null}]},{phrases:[{q:"Will you let me out ?",a:"All ways lead to the end.",event:"nextReply",levelEvent:null},{q:"I wanna meet the others.",a:"The next level is waiting for you.",event:"close",levelEvent:"addStairs"}]},{phrases:[{q:"Everything's looped here.",a:"Everything is looped with small differences.",event:"nextReply",levelEvent:null},{q:"How many levels even are there ?",a:"It all depends on you.",event:"close",levelEvent:null}]},{phrases:[{q:"That's it, I'm done.",a:"Have you reached your journey's end ?",event:"nextReply",levelEvent:null},{q:"Yes, you mad bastard! I have !",a:"Then I am giving you the sign.",event:"close",levelEvent:"addWell"}]}]},qe=Object(Ye.c)({app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge,t=arguments.length>1?arguments[1]:void 0;if("CLICK_FULL_SCREEN"===t.type)return Object(X.a)(Object(X.a)({},e),{},{ui:Object(X.a)(Object(X.a)({},e.ui),{},{isShowButtFullScreen:!1})});if("EXIT_FULL_SCREEN"===t.type)return Object(X.a)(Object(X.a)({},e),{},{ui:Object(X.a)(Object(X.a)({},e.ui),{},{isShowButtFullScreen:!0})});if("INFO_TOGGLE"===t.type)return Object(X.a)(Object(X.a)({},e),{},{ui:Object(X.a)(Object(X.a)({},e.ui),{},{isShowFinalMessage:!1,isShowInfo:t.mode})});if("TOGGLE_FINAL_MESSAGE"===t.type)return Object(X.a)(Object(X.a)({},e),{},{ui:Object(X.a)(Object(X.a)({},e.ui),{},{isShowFinalMessage:t.mode,isShowInfo:!1})});if("CHANGE_ENVIRONMENT"===t.type){var n=t.newQuadrant,o=t.environmentMode;if(!H[n[1]])return e;var a=H[n[1]][o],r=a.fogNear,i=a.fogFar,l=a.color,s=a.backgroundImgKey;return Object(X.a)(Object(X.a)({},e),{},{sceneEnvironment:{fogNear:r,fogFar:i,color:l,backgroundImgKey:s}})}if("CHANGE_QUADRANT"===t.type)return Object(X.a)(Object(X.a)({},e),{},{playerQuadrant:Object(X.a)(Object(X.a)({},e.playerQuadrant),t)});if("DESTROY_START_CORRIDOR"===t.type)return Object(X.a)(Object(X.a)({},e),{},{level:Object(X.a)(Object(X.a)({},e.level),{},{isStartCorridorShow:!1})});if("CLICK_PHRASE"===t.type)return Object(X.a)(Object(X.a)({},e),{},{ui:Object(X.a)(Object(X.a)({},e.ui),{},{botAnswers:[].concat(Object(V.a)(e.ui.botAnswers),[t.phrase]),userReplicies:[]})});if("PHRASE_EVENT"===t.type){var c=t.phrase.event;if("nextReply"===c){var u=[e.phrasesData[e.botIndex].phrases[e.phraseIndex+1]];return Object(X.a)(Object(X.a)({},e),{},{phraseIndex:e.phraseIndex+1,ui:Object(X.a)(Object(X.a)({},e.ui),{},{userReplicies:u})})}if("close"===c)return Object(X.a)(Object(X.a)({},e),{},{ui:Object(X.a)(Object(X.a)({},e.ui),{},{userReplicies:[],isButtonDialog:!0}),playerQuadrant:Object(X.a)(Object(X.a)({},e.playerQuadrant),{},{oldDialogPlayerQuadrant:Object(V.a)(e.playerQuadrant.newQuadrant)})})}if("TOGGLE_DIALOG"===t.type){var d=!1,h=e.playerQuadrant,p=h.oldDialogPlayerQuadrant,f=h.newQuadrant;if(p[0]===f[0]&&p[1]===f[1]&&p[2]===f[2]||(d=!0),!d)return Object(X.a)(Object(X.a)({},e),{},{ui:Object(X.a)(Object(X.a)({},e.ui),{},{isDialog:t.isDialog,isButtonDialog:!0})});var m=0,v=e.botIndex+1,b=!1,g=e.phrasesData[v]?[e.phrasesData[v].phrases[m]]:[];return Object(X.a)(Object(X.a)({},e),{},{ui:Object(X.a)(Object(X.a)({},e.ui),{},{userReplicies:g,botAnswers:[],isDialog:t.isDialog,isButtonDialog:b}),isCanChangeBotIndex:!1,botIndex:v,phraseIndex:m})}return"TOGGLE_BUTTON"===t.type?Object(X.a)(Object(X.a)({},e),{},{ui:Object(X.a)(Object(X.a)({},e.ui),{},{isDialog:!1,isButtonDialog:t.isButtonDialog})}):e}}),He=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Ye.d,Pe=Object(Ye.e)(qe,He(Object(Ye.a)(Qe.a)));Le.a.render(Object(v.jsx)(a.a,{store:Pe,children:Object(v.jsx)(w,{})}),document.getElementById("root")),function(e){var t=document.querySelector(".app-wrapper");e.subscribe("mouseDown")((function(e){"butt-fullscreen"===e&&n()}));var n=function(){t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen()},o=function(e){t.style.width=window.innerWidth+"px",t.style.height=window.innerHeight+"px",t.style.fontSize=Math.max(Math.min(Math.min(window.innerWidth,window.innerHeight),400),350)/50+"px",document.fullscreenElement||c(y.dispatch).exitFullScreen()};window.addEventListener("resize",o),o()}(l);var Ue=function(e){!function(e){var t=e.emit(q),n={time:0,delta:0,count:0,oldTime:0},o=O.a((function(){return n}),(function(e){return e.time=Date.now(),e}),(function(e){return e.delta=.001*(e.time-e.oldTime),(isNaN(e.delta)||e.delta>1e3||0===e.delta)&&(e.delta=1e3/60*.001),e}),(function(e){return e.count=e.delta/(1/60),e}),(function(e){return t(e),e}),(function(e){return e.oldTime=e.time,e}),(function(e){return n=e}));!function e(){requestAnimationFrame(e),o(n)}()}(l),l.subscribe(q)((function(){return he.b()}));var t=function(e,t,n){var o=P.canId,a=P.rendererCon,r=P.clearColor,i=P.amb,l=document.getElementById(o);a.canvas=l;var s=new ne.WebGLRenderer(a);s.setClearColor(r),s.setPixelRatio(window.devicePixelRatio),s.setSize(window.innerWidth,window.innerHeight);var c,u=new ne.Scene,d=n.getState().app.sceneEnvironment,h=d.color,p=d.fogNear,f=d.fogFar,m=d.backgroundImgKey;u.background=t[m]||null,u.fog=new ne.Fog(h,p,f);var v=i.color,b=i.strength;c=new ne.AmbientLight(v,b),u.add(c);var g=null,y=new pe.a(s),w=function(){var e={width:window.innerWidth,height:window.innerHeight};s.setSize(e.width,e.height),y.setSize(e.width,e.height),g&&(g.aspect=e.width/e.height,g.updateProjectionMatrix())};window.addEventListener("resize",w),w();var j=u.add.bind(u);e.subscribe(q)((function(){return g&&y.render(u,g)}));var O=u.fog.near,_=u.fog.far,N=u.fog.color,S=n.getState().app.sceneEnvironment.backgroundImgKey;return n.subscribe((function(){var e=n.getState().app.sceneEnvironment,o=e.fogNear,a=e.fogFar,r=e.color,i=e.backgroundImgKey;if(o!==O||a!==_||r!==N){var l={color:u.fog.color,near:u.fog.near,far:u.fog.far},d={color:new ne.Color(r),near:o,far:a};O=o,_=a,N=r,new he.a(l).to(d,3e3).onUpdate((function(){u.fog.color=l.color,u.fog.near=l.near,u.fog.far=l.far,c.color=l.color,s.setClearColor(l.color)})).start()}i!==S&&(S=i,u.background=t[i]||null)})),{setCamera:function(e){g=e,y.addPass(new fe.a(u,e)),y.addPass(new me.a(ve))},addToScene:j}}(l,e,Pe);new j(l);var n=Ne(l);t.setCamera(n.getCamera()),t.addToScene(n.getObj());var o=function(e){var t=de(e),n={},o={};return e.collisionsBotsRooms={},e["level-rooms"].traverse((function(a){if(a.name.includes("room_")){var r=new ne.Mesh(a.geometry,t.wall);n[a.name]=r,r.name=a.name,o[a.name]=r}if(a.name.includes("collision_")){var i=new ne.Mesh(a.geometry);e.collisionsBotsRooms[a.name]=i,i.name=a.name,o[a.name]=i}if(a.name.includes("outer_walls")){var l=new ne.Mesh(a.geometry,t.wall);l.name=a.name,o[a.name]=l}if(a.name.includes("outer_road")){var s=new ne.Mesh(a.geometry,t.green);s.name=a.name,o[a.name]=s}if(a.name.includes("outer_floor")){var c=new ne.Mesh(a.geometry,t.road);c.name=a.name,o[a.name]=c}})),{rooms:n,allMeshes:o,materials:t}}(e),a=o.allMeshes,r=o.rooms,i=o.materials,c=function(e,t,n,o){var a=new ne.Group,r={},i="normal",l=function n(o,i){var l=i||Me[Math.floor(Math.random()*Me.length)],s="r_".concat(o[0],"_").concat(o[1],"_").concat(o[2]),c=t[l].clone();c.position.set(o[0]*G,70*o[1],o[2]*G),ge(c),je(c),a.add(c),r[s]=c,e.emit("levelChanged")({typeLevelChange:"createRoom",instanceKey:l,objKey:s,kv:o,isAddBot:"room_01"===l}),"room_06"===l&&n([o[0],o[1]+1,o[2]],"room_dummy")},s=function t(n){var o="r_".concat(n[0],"_").concat(n[1],"_").concat(n[2]);if(r[o]){var i=r[o].name;a.remove(r[o]),ye(r[o]),Oe(r[o]),delete r[o],e.emit("levelChanged")({typeLevelChange:"destroyRoom",instanceKey:i,objKey:o,kv:n,isRemoveBot:"room_01"===i}),"room_dummy"===i&&t([n[0],n[1]-1,n[2]]),"room_06"===i&&t([n[0],n[1]+1,n[2]])}};l([0,-1,0],"room_02"),l([0,-1,-1],"room_02"),l([-1,-1,0],"room_02"),l([1,-1,0],"room_02");for(var c={},u=0;u<ke.length;++u){var d=n[ke[u]].clone();ge(d),je(d),a.add(d),d.position.set(0,-70,0),c[ke[u]]=d}var h=0,p=!1,f=o.getState(),m=f.app.playerQuadrant.oldQuadrant,v=f.app.playerQuadrant.newQuadrant,b=f.app.level.isStartCorridorShow;return o.subscribe((function(){var t=o.getState();if(b&&b!==t.app.level.isStartCorridorShow)for(var n in b=!1,c)ye(c[n]),Oe(c[n]),a.remove(c[n]);var u=t.app.playerQuadrant,d=u.type,f=u.oldQuadrant,g=u.newQuadrant,y=u.counter;if("CHANGE_QUADRANT"===d&&(m[0]!==f[0]||m[1]!==f[1]||m[2]!==f[2]||v[0]!==g[0]||v[1]!==g[1]||v[2]!==g[2])){m=Object(V.a)(f),v=Object(V.a)(g);var w=Me[Math.floor(Math.random()*Me.length)];y&&(h=y(h),p?p=!1:(h<3?i="normal":h<100?"normal"===i&&(i="addBot"):i="addStairs","addBot"===i&&(w="room_01",p=!0),"addStairs"===i&&(w="room_06",p=!0),"addWell"===i&&(w="room_07"))),e.subscribe("changeLevelMode")((function(e){return i=e}));var j=f,O=g;O[0]<j[0]&&(console.log("----------- west"),s([j[0]+1,j[1],j[2]]),r["r_".concat(O[0]+1,"_").concat(O[1],"_").concat(O[2])]=r["r_".concat(j[0],"_").concat(j[1],"_").concat(j[2])],l([j[0]-2,j[1],j[2]],w),s([j[0],j[1],j[2]-1]),l([O[0],O[1],O[2]-1],w),s([j[0],j[1],j[2]+1]),l([O[0],O[1],O[2]+1],w)),O[0]>j[0]&&(console.log("----------- east"),s([j[0]-1,j[1],j[2]]),r["r_".concat(O[0]-1,"_").concat(O[1],"_").concat(O[2])]=r["r_".concat(j[0],"_").concat(j[1],"_").concat(j[2])],l([j[0]+2,j[1],j[2]],w),s([j[0],j[1],j[2]-1]),l([O[0],O[1],O[2]-1],w),s([j[0],j[1],j[2]+1]),l([O[0],O[1],O[2]+1],w)),O[2]<j[2]&&(console.log("-----------north"),s([j[0],j[1],j[2]+1]),r["r_".concat(O[0],"_").concat(O[1],"_").concat(O[2]+1)]=r["r_".concat(j[0],"_").concat(j[1],"_").concat(j[2])],l([j[0],j[1],j[2]-2],w),s([j[0]-1,j[1],j[2]]),l([O[0]-1,O[1],O[2]],w),s([j[0]+1,j[1],j[2]]),l([O[0]+1,O[1],O[2]],w)),O[2]>j[2]&&(console.log("-----------south"),s([j[0],j[1],j[2]-1]),r["r_".concat(O[0],"_").concat(O[1],"_").concat(O[2]-1)]=r["r_".concat(j[0],"_").concat(j[1],"_").concat(j[2])],l([j[0],j[1],j[2]+2],w),s([j[0]-1,j[1],j[2]]),l([O[0]-1,O[1],O[2]],w),s([j[0]+1,j[1],j[2]]),l([O[0]+1,O[1],O[2]],w)),(O[1]>j[1]||O[1]<j[1])&&(console.log("-----------top"),s([j[0],j[1],j[2]-1]),l([O[0],O[1],O[2]-1]),s([j[0],j[1],j[2]+1]),l([O[0],O[1],O[2]+1]),s([j[0]-1,j[1],j[2]]),l([O[0]-1,O[1],O[2]]),s([j[0]+1,j[1],j[2]]),l([O[0]+1,O[1],O[2]]))}})),{group:a}}(l,r,a,Pe).group;t.addToScene(c);var u=function(e,t,n,o){Re.botMaterial=t.iron,Re.botScene=e.bot;for(var a=new ne.Group,r=[],i=0;i<5;++i){var l=new Re;a.add(l.container),l.container.position.set(30*i-30,-92,750),l.inScene="aaa",l.setCollisionMesh(e.collisionsBotsRooms.collision_r_01.clone()),r.push(l)}n.subscribe(q)((function(e){for(var t=0;t<r.length;++t)r[t].inScene&&r[t].update(e)}));var s=o.getState().app.level.isStartCorridorShow;return o.subscribe((function(){var e=o.getState();if(s&&s!==e.app.level.isStartCorridorShow){s=e.app.level.isStartCorridorShow;for(var t=0;t<r.length;++t)r[t].inScene=null,r[t].container.position.y=-1e4,r[t].removeCollisionMesh()}})),n.subscribe("levelChanged")((function(t){t.typeLevelChange,t.instanceKey;var n=t.objKey,o=t.kv,a=t.isAddBot,i=t.isRemoveBot;if(a)for(var l=0;l<r.length;++l)if(!r[l].inScene){r[l].inScene=n,r[l].container.position.set(o[0]*Ce,70*o[1]+14,o[2]*Ce),r[l].setCollisionMesh(e.collisionsBotsRooms.collision_r_01.clone());break}if(i)for(var s=0;s<r.length;++s)r[s].inScene===n&&(r[s].inScene=null,r[s].container.position.y=-1e4,r[s].removeCollisionMesh())})),n.subscribe("playerMove")((function(e){for(var t=0;t<r.length;++t)if(r[t].inScene){var n=new ne.Vector3;r[t]._modelGroup.getWorldPosition(n);var o=n.distanceTo(e);"say"===r[t]._state&&o>30?(r[t]._startRotate(),d(y.dispatch).toggleButtonDialog(!1)):"say"!==r[t]._state&&o<30&&(r[t].prepareToSay(e),d(y.dispatch).toggleButtonDialog(!0))}})),{groupBots:a}}(e,i,l,Pe);t.addToScene(u.groupBots),function(){var e=te();l.subscribe("playerMove")((function(t){var n=e.update(t),o=n.currentQuadrant,a=n.oldQuadrant;if(n.isChanged){var r=$(a,o);r.length&&r.forEach((function(e){return y.dispatch(Object(X.a)(Object(X.a)({},e),{},{type:e.emitKey}))}))}}))}(),setTimeout((function(){return n.start()}),500),function(e){var t=document.querySelector(".startbuttons-wrapper"),n=document.querySelector(".progress-wrapper");Ae=!1,t.style.display="flex",t.addEventListener("click",(function(t){e.emit("setLanguage")(t.target.dataset.lang),document.querySelector(".start-screen").style.display="none"})),n.style.display="none"}(l),l.subscribe("setLanguage")((function(){setTimeout(s(y.dispatch).startPlay,1e3),setTimeout(s(y.dispatch).showBackground,3e3)}))};window.addEventListener("load",(function(){return(e=Y,new Promise((function(t){ie=e,re=t,se=0,B=B||new oe.a,K=K||new ne.TextureLoader,W=W||new ae.a,z=z||new ne.CubeTextureLoader,ce(ie[se])}))).then(Ue);var e}))}},[[41,1,2]]]);
//# sourceMappingURL=main.5abb040a.chunk.js.map